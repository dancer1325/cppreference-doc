[C++](../../../cpp.html "cpp")

[Compiler support](../../compiler_support.html "cpp/compiler support")  
---  
[Freestanding and hosted](../../freestanding.html "cpp/freestanding")  
[Language](../../language.html "cpp/language")  
[Standard library](../../standard_library.html "cpp/standard library")  
[Standard library headers](../../headers.html "cpp/header")  
[Named requirements](../../iterator/concepts.html "cpp/named req")  
[Feature test macros](../../experimental/feature_test.html "cpp/feature test") (C++20)  
[Language support library](../../utility.html#Language_support "cpp/utility")  
[Concepts library](../../concepts.html "cpp/concepts") (C++20)  
[Diagnostics library](../../error.html "cpp/error")  
[Memory management library](../../memory.html "cpp/memory")  
[Metaprogramming library](../../meta.html "cpp/meta") (C++11)  
[General utilities library](../../utility.html "cpp/utility")  
[Containers library](../../container.html "cpp/container")  
[Iterators library](../../iterator.html "cpp/iterator")  
[Ranges library](../../ranges.html "cpp/ranges") (C++20)  
[Algorithms library](../../algorithm.html "cpp/algorithm")  
[Strings library](../../string.html "cpp/string")  
[Text processing library](../../text.html "cpp/text")  
[Numerics library](../../numeric.html "cpp/numeric")  
[Date and time library](../../chrono.html "cpp/chrono")  
[Input/output library](../../io.html "cpp/io")  
[Filesystem library](../../filesystem.html "cpp/filesystem") (C++17)  
[Concurrency support library](../../atomic.html "cpp/thread") (C++11)  
[Execution control library](../../experimental/execution.html "cpp/execution") (C++26)  
[Technical specifications](../../experimental.html "cpp/experimental")  
[Symbols index](../../symbol_index.html "cpp/symbol index")  
[External libraries](../../links/libs.html "cpp/links/libs")  
  
[[edit]](https://en.cppreference.com/mwiki/index.php?title=Template:cpp/navbar_content&action=edit)

[Input/output library](../../io.html "cpp/io")

[I/O manipulators](../manip.html "cpp/io/manip")  
---  
[Print functions](../../io.html#Print_functions_.28since_C.2B.2B23.29 "cpp/io") (C++23)  
[C-style I/O](../c.html "cpp/io/c")  
Buffers  
[basic_streambuf](../basic_streambuf.html "cpp/io/basic streambuf")  
[basic_filebuf](../basic_filebuf.html "cpp/io/basic filebuf")  
[basic_stringbuf](../basic_stringbuf.html "cpp/io/basic stringbuf")  
[basic_spanbuf](../basic_spanbuf.html "cpp/io/basic spanbuf")(C++23)  
[strstreambuf](../strstreambuf.html "cpp/io/strstreambuf")(C++98/26*)  
[basic_syncbuf](../basic_syncbuf.html "cpp/io/basic syncbuf")(C++20)  
Streams  
Abstractions  
[ios_base](../ios_base.html "cpp/io/ios base")  
[basic_ios](../basic_ios.html "cpp/io/basic ios")  
[basic_istream](../basic_istream.html "cpp/io/basic istream")  
[basic_ostream](../basic_ostream.html "cpp/io/basic ostream")  
[basic_iostream](../basic_iostream.html "cpp/io/basic iostream")  
File I/O  
[basic_ifstream](../basic_ifstream.html "cpp/io/basic ifstream")  
[basic_ofstream](../basic_ofstream.html "cpp/io/basic ofstream")  
[basic_fstream](../basic_fstream.html "cpp/io/basic fstream")  
String I/O  
[basic_istringstream](../basic_istringstream.html "cpp/io/basic istringstream")  
[basic_ostringstream](../basic_ostringstream.html "cpp/io/basic ostringstream")  
[basic_stringstream](../basic_stringstream.html "cpp/io/basic stringstream")  
Array I/O  
[basic_ispanstream](../basic_ispanstream.html "cpp/io/basic ispanstream")(C++23)  
[basic_ospanstream](../basic_ospanstream.html "cpp/io/basic ospanstream")(C++23)  
[basic_spanstream](../basic_spanstream.html "cpp/io/basic spanstream")(C++23)  
[istrstream](../istrstream.html "cpp/io/istrstream")(C++98/26*)  
[ostrstream](../ostrstream.html "cpp/io/ostrstream")(C++98/26*)  
[strstream](../strstream.html "cpp/io/strstream")(C++98/26*)  
Synchronized Output  
[basic_osyncstream](../basic_osyncstream.html "cpp/io/basic osyncstream")(C++20)  
Types  
[streamoff](../streamoff.html "cpp/io/streamoff")  
[streamsize](../streamsize.html "cpp/io/streamsize")  
[fpos](../fpos.html "cpp/io/fpos")  
Error category interface  
[iostream_category](../iostream_category.html "cpp/io/iostream category")(C++11)  
[io_errc](../io_errc.html "cpp/io/io errc")(C++11)  
  
[[edit]](https://en.cppreference.com/mwiki/index.php?title=Template:cpp/io/navbar_content&action=edit)

[`std::basic_stringbuf`](../basic_stringbuf.html "cpp/io/basic stringbuf")

Public member functions  
---  
**basic_stringbuf::basic_stringbuf**  
[basic_stringbuf::operator=](operator=.html "cpp/io/basic stringbuf/operator=")(C++11)  
[basic_stringbuf::swap](swap.html "cpp/io/basic stringbuf/swap")(C++11)  
[basic_stringbuf::str](str.html "cpp/io/basic stringbuf/str")  
[basic_stringbuf::get_allocator](get_allocator.html "cpp/io/basic stringbuf/get allocator")(C++20)  
[basic_stringbuf::view](view.html "cpp/io/basic stringbuf/view")(C++20)  
Protected member functions  
[basic_stringbuf::underflow](underflow.html "cpp/io/basic stringbuf/underflow")  
[basic_stringbuf::pbackfail](pbackfail.html "cpp/io/basic stringbuf/pbackfail")  
[basic_stringbuf::overflow](overflow.html "cpp/io/basic stringbuf/overflow")  
[basic_stringbuf::setbuf](setbuf.html "cpp/io/basic stringbuf/setbuf")  
[basic_stringbuf::seekoff](seekoff.html "cpp/io/basic stringbuf/seekoff")  
[basic_stringbuf::seekpos](seekpos.html "cpp/io/basic stringbuf/seekpos")  
Non-member functions  
[swap(std::basic_stringbuf)](swap2.html "cpp/io/basic stringbuf/swap2")(C++11)  
Exposition-only member functions  
[basic_stringbuf::_init_buf_ptrs_](init_buf_ptrs.html "cpp/io/basic stringbuf/init buf ptrs")  
  
[[edit]](https://en.cppreference.com/mwiki/index.php?title=Template:cpp/io/basic_stringbuf/navbar_content&action=edit)

| (1) |   
---|---|---  
explicit basic_stringbuf( [std::ios_base::openmode](../ios_base/openmode.html) which =  
[std::ios_base::in](../ios_base/openmode.html) | [std::ios_base::out](../ios_base/openmode.html) ); |  | (until C++11)  
explicit basic_stringbuf( [std::ios_base::openmode](../ios_base/openmode.html) which ); |  |  (since C++11)  
basic_stringbuf()  
: basic_stringbuf( [std::ios_base::in](../ios_base/openmode.html) | [std::ios_base::out](../ios_base/openmode.html) ) {} |  (2)  |  (since C++11)  
explicit  
basic_stringbuf( const [std::basic_string](../../string/basic_string.html)<CharT, Traits, Allocator>& s,  
[std::ios_base::openmode](../ios_base/openmode.html) which =  
[std::ios_base::in](../ios_base/openmode.html) | [std::ios_base::out](../ios_base/openmode.html) ); |  (3)  |   
explicit basic_stringbuf( [std::basic_string](../../string/basic_string.html)<CharT, Traits, Allocator>&& s,  
[std::ios_base::openmode](../ios_base/openmode.html) which =  
[std::ios_base::in](../ios_base/openmode.html) | [std::ios_base::out](../ios_base/openmode.html) ); |  (4)  |  (since C++20)  
basic_stringbuf( [std::ios_base::openmode](../ios_base/openmode.html) which, const Allocator& a ); |  (5)  |  (since C++20)  
explicit basic_stringbuf( const Allocator& a )  
: basic_stringbuf( [std::ios_base::in](../ios_base/openmode.html) | [std::ios_base::out](../ios_base/openmode.html), a ) {} |  (6)  |  (since C++20)  
template< class SAlloc >  
explicit basic_stringbuf( const [std::basic_string](../../string/basic_string.html)<CharT, Traits, SAlloc>& s,  
[std::ios_base::openmode](../ios_base/openmode.html) which =  
[std::ios_base::in](../ios_base/openmode.html) | [std::ios_base::out](../ios_base/openmode.html) ); |  (7)  |  (since C++20)  
template< class SAlloc >  
basic_stringbuf( const [std::basic_string](../../string/basic_string.html)<CharT, Traits, SAlloc>& s,  
[std::ios_base::openmode](../ios_base/openmode.html) which, const Allocator& a ); |  (8)  |  (since C++20)  
template< class SAlloc >  
basic_stringbuf( const [std::basic_string](../../string/basic_string.html)<CharT, Traits, SAlloc>& s,  
const Allocator& a )  
: basic_stringbuf( s, [std::ios_base::in](../ios_base/openmode.html) | [std::ios_base::out](../ios_base/openmode.html), a ) {} |  (9)  |  (since C++20)  
template< class StringViewLike >  
explicit basic_stringbuf( const StringViewLike& t,  
[std::ios_base::openmode](../ios_base/openmode.html) which =  
[std::ios_base::in](../ios_base/openmode.html) | [std::ios_base::out](../ios_base/openmode.html) ); |  (10)  |  (since C++26)  
template< class StringViewLike >  
basic_stringbuf( const StringViewLike& t,  
[std::ios_base::openmode](../ios_base/openmode.html) which, const Allocator& a ); |  (11)  |  (since C++26)  
template< class StringViewLike >  
basic_stringbuf( const StringViewLike& t, const Allocator& a ); |  (12)  |  (since C++26)  
basic_stringbuf( basic_stringbuf&& rhs ); |  (13)  |  (since C++11)  
basic_stringbuf( basic_stringbuf&& rhs, const Allocator& a ); |  (14)  |  (since C++20)  
basic_stringbuf( const basic_stringbuf& rhs ) = delete; |  (15)  |  (since C++11)  
| |   
  
The [std::basic_streambuf](../basic_streambuf.html "cpp/io/basic streambuf") base and the [exposition-only data members](../basic_stringbuf.html#Exposition-only_members "cpp/io/basic stringbuf") `_buf_` and `_mode_` are initialized as follows. 

After initializing these subobjects, overloads (3-12) initialize the input and output sequences as if by calling [`_init_buf_ptrs_()`](init_buf_ptrs.html "cpp/io/basic stringbuf/init buf ptrs"). 

Overload  |  [std::basic_streambuf](../basic_streambuf.html "cpp/io/basic streambuf") base  | `_buf_` | `_mode_`  
---|---|---|---  
(1) | default-initialized  | implementation-defined  
(see below)  | which  
(2) |  [std::ios_base::in](../ios_base/openmode.html) |  
[std::ios_base::out](../ios_base/openmode.html)  
(3) | s | which  
(4) | std::move(s)  
(5) | a  
(6) |  [std::ios_base::in](../ios_base/openmode.html) |  
[std::ios_base::out](../ios_base/openmode.html)  
(7) | s | which  
(8) | {s, a}  
(9) |  [std::ios_base::in](../ios_base/openmode.html) |  
[std::ios_base::out](../ios_base/openmode.html)  
(10) | {sv, Allocator()} | which  
(11) | {sv, a}  
(12) |  [std::ios_base::in](../ios_base/openmode.html) |  
[std::ios_base::out](../ios_base/openmode.html)  
(13) | rhs  
(copy constructed)  | std::move(rhs).str() | rhs.mode  
(14) |  {std::move(rhs).str(), a}  
  
1,2) Overload (1)(until C++11)(2)(since C++11) is the default constructor. It is implementation-defined whether the sequence pointers ([eback()](../basic_streambuf/gptr.html "cpp/io/basic streambuf/gptr"), [gptr()](../basic_streambuf/gptr.html "cpp/io/basic streambuf/gptr"), [egptr()](../basic_streambuf/gptr.html "cpp/io/basic streambuf/gptr"), [pbase()](../basic_streambuf/pptr.html "cpp/io/basic streambuf/pptr"), [pptr()](../basic_streambuf/pptr.html "cpp/io/basic streambuf/pptr"), [epptr()](../basic_streambuf/pptr.html "cpp/io/basic streambuf/pptr")) are initialized to null pointers.

5,6) When the construction is complete, str.empty() is true.

7) This overload participates in overload resolution only if [std::is_same_v](../../types/is_same.html)<SAlloc, Allocator> is false.

10-12) Implicitly converts t to a string view sv as if by [std::basic_string_view](../../string/basic_string_view.html)<CharT, Traits> sv = t;, then it is used as above in the table.

These overloads participate in overload resolution only if [std::is_convertible_v](../../types/is_convertible.html)<const StringViewLike&,  
[std::basic_string_view](../../string/basic_string_view.html)<CharT, Traits>> is true.

13,14) Overload (13) is the move constructor. It is implementation-defined whether the six sequence pointers in *this obtain the values which rhs had.

When the construction is complete, rhs is empty but usable, and 

  * Let rhs_p refer to the state of rhs just prior to this construction, the following expressions will evaluate to true: 



    

  * str() == rhs_p.str()
  * getloc() == rhs_p.getloc()
  * gptr() - eback() == rhs_p.gptr() - rhs_p.eback()
  * egptr() - eback() == rhs_p.egptr() - rhs_p.eback()
  * pptr() - pbase() == rhs_p.pptr() - rhs_p.pbase()
  * epptr() - pbase() == rhs_p.epptr() - rhs_p.pbase()



  * Let rhs_a refer to the state of rhs just after this construction, the following expressions will evaluate to true: 



    

  * !eback() || eback() != rhs_a.eback()
  * !gptr() || gptr() != rhs_a.gptr()
  * !egptr() || egptr() != rhs_a.egptr()
  * !pbase() || pbase() != rhs_a.pbase()
  * !pptr() || pptr() != rhs_a.pptr()
  * !epptr() || epptr() != rhs_a.epptr()



15) The copy constructor is deleted; `std::basic_stringbuf` is not [CopyConstructible](../../named_req/CopyConstructible.html "cpp/named req/CopyConstructible").

## Contents

  * [1 Parameters](basic_stringbuf.html#Parameters)
  * [2 Notes](basic_stringbuf.html#Notes)
  * [3 Example](basic_stringbuf.html#Example)
  * [4 Defect reports](basic_stringbuf.html#Defect_reports)
  * [5 See also](basic_stringbuf.html#See_also)

  
---  
  
### [[edit](https://en.cppreference.com/mwiki/index.php?title=cpp/io/basic_stringbuf/basic_stringbuf&action=edit&section=1 "Edit section: Parameters")] Parameters

s  |  \-  |  a [std::basic_string](../../string/basic_string.html "cpp/string/basic string") used to initialize the buffer   
---|---|---  
t  |  \-  |  an object (convertible to [std::basic_string_view](../../string/basic_string_view.html "cpp/string/basic string view")) used to initialize the buffer   
a  |  \-  |  another allocator used to construct the internal [std::basic_string](../../string/basic_string.html "cpp/string/basic string")  
rhs  |  \-  |  another `basic_stringbuf`  
which  |  \-  |  specifies stream open mode. It is bitmask type, the following constants are defined:  |  Constant  |  Explanation   
---|---  
[`app`](../ios_base/openmode.html "cpp/io/ios base/openmode") |  seek to the end of stream before each write   
[`binary`](../ios_base/openmode.html "cpp/io/ios base/openmode") |  open in [binary mode](../c/FILE.html#Binary_and_text_modes "cpp/io/c/FILE")  
[`in`](../ios_base/openmode.html "cpp/io/ios base/openmode") |  open for reading   
[`out`](../ios_base/openmode.html "cpp/io/ios base/openmode") |  open for writing   
[`trunc`](../ios_base/openmode.html "cpp/io/ios base/openmode") |  discard the contents of the stream when opening   
[`ate`](../ios_base/openmode.html "cpp/io/ios base/openmode") |  seek to the end of stream immediately after open   
[`noreplace`](../ios_base/openmode.html "cpp/io/ios base/openmode") (C++23) |  open in exclusive mode   
  
### [[edit](https://en.cppreference.com/mwiki/index.php?title=cpp/io/basic_stringbuf/basic_stringbuf&action=edit&section=2 "Edit section: Notes")] Notes

Typically called by the constructor of [std::basic_stringstream](../basic_stringstream.html "cpp/io/basic stringstream"). 

The level of support for the open modes other than [std::ios_base::in](../ios_base/openmode.html "cpp/io/ios base/openmode") and [std::ios_base::out](../ios_base/openmode.html "cpp/io/ios base/openmode") varies among implementations. C++11 explicitly specifies the support for [std::ios_base::ate](../ios_base/openmode.html "cpp/io/ios base/openmode") in [str()](str.html "cpp/io/basic stringbuf/str") and in this constructor, but [std::ios_base::app](../ios_base/openmode.html "cpp/io/ios base/openmode"), [std::ios_base::trunc](../ios_base/openmode.html "cpp/io/ios base/openmode"), and [std::ios_base::binary](../ios_base/openmode.html "cpp/io/ios base/openmode") have different effects on different implementations. 

[Feature-test](../../utility/feature_test.html "cpp/utility/feature test") macro  | Value | Std | Feature   
---|---|---|---  
[`__cpp_lib_sstream_from_string_view`](../../experimental/feature_test.html#cpp_lib_sstream_from_string_view "cpp/feature test") | [`202306L`](../../compiler_support/26.html#cpp_lib_sstream_from_string_view_202306L "cpp/compiler support/26") | (C++26) | Interfacing string streams with [std::string_view](../../string/basic_string_view.html "cpp/string/basic string view")  
  
### [[edit](https://en.cppreference.com/mwiki/index.php?title=cpp/io/basic_stringbuf/basic_stringbuf&action=edit&section=3 "Edit section: Example")] Example

Demonstrates calling the constructor of `std::basic_stringbuf` directly:

Run this code
    
    
    #include <iostream>
    #include <sstream>
     
    int main()
    {
        // default constructor (mode = in | out)
        [std::stringbuf](../basic_stringbuf.html) buf1;
        buf1.sputc('1');
        [std::cout](../cout.html) << &buf1 << '\n';
     
        // string constructor in at-end mode (C++11)
        [std::stringbuf](../basic_stringbuf.html) buf2("test", [std::ios_base::in](../ios_base/openmode.html)
                                  | [std::ios_base::out](../ios_base/openmode.html)
                                  | [std::ios_base::ate](../ios_base/openmode.html));
        buf2.sputc('1');
        [std::cout](../cout.html) << &buf2 << '\n';
     
        // append mode test (results differ among compilers)
        [std::stringbuf](../basic_stringbuf.html) buf3("test", [std::ios_base::in](../ios_base/openmode.html)
                                  | [std::ios_base::out](../ios_base/openmode.html)
                                  | [std::ios_base::app](../ios_base/openmode.html));
        buf3.sputc('1');
        buf3.pubseekpos(1);
        buf3.sputc('2');
        [std::cout](../cout.html) << &buf3 << '\n';
    }

Output: 
    
    
    1
    test1
    est12 (Sun Studio) 2st1 (GCC)

### [[edit](https://en.cppreference.com/mwiki/index.php?title=cpp/io/basic_stringbuf/basic_stringbuf&action=edit&section=4 "Edit section: Defect reports")] Defect reports

The following behavior-changing defect reports were applied retroactively to previously published C++ standards. 

DR  | Applied to  | Behavior as published  | Correct behavior   
---|---|---|---  
[LWG 432](https://cplusplus.github.io/LWG/issue432) | C++98  | 1\. overload (1) allocated no array object  
2\. overload (3) did not specify how the input  
and output sequences are initialized  | 1\. removed the limitation  
2\. specified   
[LWG 562](https://cplusplus.github.io/LWG/issue562) | C++98  | overload (3) set [epptr()](../basic_streambuf/pptr.html "cpp/io/basic streambuf/pptr") to point one past the last underlying  
character if bool(which & [std::ios_base::out](../ios_base/openmode.html)) == true | [epptr()](../basic_streambuf/pptr.html "cpp/io/basic streambuf/pptr") can be set  
beyond that position   
[P0935R0](https://wg21.link/P0935R0) | C++11  | the default constructor was explicit  | made implicit   
  
### [[edit](https://en.cppreference.com/mwiki/index.php?title=cpp/io/basic_stringbuf/basic_stringbuf&action=edit&section=5 "Edit section: See also")] See also

[ (constructor)](../basic_stringstream/basic_stringstream.html "cpp/io/basic stringstream/basic stringstream") |  constructs the string stream   
(public member function of `std::basic_stringstream<CharT,Traits,Allocator>`) [[edit]](https://en.cppreference.com/mwiki/index.php?title=Template:cpp/io/basic_stringstream/dsc_constructor&action=edit)  
---|---
  *[Value]: The year/month in which the feature was adopted. The hyperlink under each value opens a compiler support page with entry for given feature.
  *[Std]: Standard in which the feature is introduced; DR means defect report against that revision
