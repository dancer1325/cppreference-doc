[C++](../../../cpp.html "cpp")

[Compiler support](../../compiler_support.html "cpp/compiler support")  
---  
[Freestanding and hosted](../../freestanding.html "cpp/freestanding")  
[Language](../../language.html "cpp/language")  
[Standard library](../../standard_library.html "cpp/standard library")  
[Standard library headers](../../headers.html "cpp/header")  
[Named requirements](../../iterator/concepts.html "cpp/named req")  
[Feature test macros](../feature_test.html "cpp/feature test") (C++20)  
[Language support library](../../utility.html#Language_support "cpp/utility")  
[Concepts library](../../concepts.html "cpp/concepts") (C++20)  
[Diagnostics library](../../error.html "cpp/error")  
[Memory management library](../../memory.html "cpp/memory")  
[Metaprogramming library](../../meta.html "cpp/meta") (C++11)  
[General utilities library](../../utility.html "cpp/utility")  
[Containers library](../../container.html "cpp/container")  
[Iterators library](../../iterator.html "cpp/iterator")  
[Ranges library](../../ranges.html "cpp/ranges") (C++20)  
[Algorithms library](../../algorithm.html "cpp/algorithm")  
[Strings library](../../string.html "cpp/string")  
[Text processing library](../../text.html "cpp/text")  
[Numerics library](../../numeric.html "cpp/numeric")  
[Date and time library](../../chrono.html "cpp/chrono")  
[Input/output library](../../io.html "cpp/io")  
[Filesystem library](../../filesystem.html "cpp/filesystem") (C++17)  
[Concurrency support library](../../atomic.html "cpp/thread") (C++11)  
[Execution control library](../execution.html "cpp/execution") (C++26)  
[Technical specifications](../../experimental.html "cpp/experimental")  
[Symbols index](../../symbol_index.html "cpp/symbol index")  
[External libraries](../../links/libs.html "cpp/links/libs")  
  


[Experimental](../../experimental.html "cpp/experimental")

[Technical Specification](../../experimental.html#Technical_Specification "cpp/experimental")  
---  
[Filesystem library](../fs.html "cpp/experimental/fs") (filesystem TS)  
[Library fundamentals](../memory.html "cpp/experimental/lib extensions") (library fundamentals TS)  
[Library fundamentals 2](../lib_extensions_2.html "cpp/experimental/lib extensions 2") (library fundamentals TS v2)  
[Library fundamentals 3](../lib_extensions_3.html "cpp/experimental/lib extensions 3") (library fundamentals TS v3)  
[Extensions for parallelism](../parallelism.html "cpp/experimental/parallelism") (parallelism TS)  
[Extensions for parallelism 2](../parallelism_2.html "cpp/experimental/parallelism 2") (parallelism TS v2)  
[Extensions for concurrency](../concurrency.html "cpp/experimental/concurrency") (concurrency TS)  
[Extensions for concurrency 2](https://en.cppreference.com/mwiki/index.php?title=cpp/experimental/concurrency_2&action=edit&redlink=1 "cpp/experimental/concurrency 2 \(page does not exist\)") (concurrency TS v2)  
[Concepts](../constraints.html "cpp/experimental/constraints") (concepts TS)  
[Ranges](../ranges.html "cpp/experimental/ranges") (ranges TS)  
[Reflection](../reflect.html "cpp/experimental/reflect") (reflection TS)  
[Mathematical special functions](../special_math.html "cpp/experimental/special functions") (special functions TR)  
[Experimental Non-TS](../../experimental.html#Experimental_Non-TS "cpp/experimental")  
[Pattern Matching](https://en.cppreference.com/mwiki/index.php?title=cpp/experimental/pm&action=edit&redlink=1 "cpp/experimental/pm \(page does not exist\)")  
[Linear Algebra](https://en.cppreference.com/mwiki/index.php?title=cpp/experimental/la&action=edit&redlink=1 "cpp/experimental/la \(page does not exist\)")  
[std::execution](../execution.html "cpp/experimental/execution")  
[Contracts](https://en.cppreference.com/mwiki/index.php?title=cpp/experimental/contracts&action=edit&redlink=1 "cpp/experimental/contracts \(page does not exist\)")  
[2D Graphics](https://en.cppreference.com/mwiki/index.php?title=cpp/experimental/2dgraphics&action=edit&redlink=1 "cpp/experimental/2dgraphics \(page does not exist\)")  
  


[Filesystem library](../fs.html "cpp/experimental/fs")

Classes  
---  
| [filesystem::path](path.html "cpp/experimental/fs/path")  
---  
[filesystem::filesystem_error](filesystem_error.html "cpp/experimental/fs/filesystem error")  
[filesystem::directory_entry](directory_entry.html "cpp/experimental/fs/directory entry")  
[filesystem::directory_iterator](directory_iterator.html "cpp/experimental/fs/directory iterator")  
[filesystem::recursive_directory_iterator](recursive_directory_iterator.html "cpp/experimental/fs/recursive directory iterator")  
[filesystem::file_status](file_status.html "cpp/experimental/fs/file status")  
  
| [filesystem::space_info](space_info.html "cpp/experimental/fs/space info")  
---  
[filesystem::file_type](file_type.html "cpp/experimental/fs/file type")  
[filesystem::perms](perms.html "cpp/experimental/fs/perms")  
[filesystem::copy_options](copy_options.html "cpp/experimental/fs/copy options")  
[filesystem::directory_options](directory_options.html "cpp/experimental/fs/directory options")  
[filesystem::file_time_type](file_time_type.html "cpp/experimental/fs/file time type")  
  
Functions  
| [filesystem::absolute  
filesystem::system_complete](absolute.html "cpp/experimental/fs/absolute")  
---  
[filesystem::canonical](canonical.html "cpp/experimental/fs/canonical")  
**filesystem::copy**  
[filesystem::copy_file](copy_file.html "cpp/experimental/fs/copy file")  
[filesystem::copy_symlink](copy_symlink.html "cpp/experimental/fs/copy symlink")  
[filesystem::create_directory  
filesystem::create_directories](create_directory.html "cpp/experimental/fs/create directory")  
[filesystem::create_hard_link](create_hard_link.html "cpp/experimental/fs/create hard link")  
[filesystem::create_symlink  
filesystem::create_directory_symlink](create_symlink.html "cpp/experimental/fs/create symlink")  
[filesystem::current_path](current_path.html "cpp/experimental/fs/current path")  
[filesystem::exists](exists.html "cpp/experimental/fs/exists")  
[filesystem::equivalent](equivalent.html "cpp/experimental/fs/equivalent")  
  
| [filesystem::file_size](file_size.html "cpp/experimental/fs/file size")  
---  
[filesystem::hard_link_count](hard_link_count.html "cpp/experimental/fs/hard link count")  
[filesystem::last_write_time](last_write_time.html "cpp/experimental/fs/last write time")  
[filesystem::permissions](permissions.html "cpp/experimental/fs/permissions")  
[filesystem::read_symlink](read_symlink.html "cpp/experimental/fs/read symlink")  
[filesystem::remove  
filesystem::remove_all](remove.html "cpp/experimental/fs/remove")  
[filesystem::rename](rename.html "cpp/experimental/fs/rename")  
[filesystem::resize_file](resize_file.html "cpp/experimental/fs/resize file")  
[filesystem::space](space.html "cpp/experimental/fs/space")  
[filesystem::status  
filesystem::symlink_status](status.html "cpp/experimental/fs/status")  
[filesystem::temp_directory_path](temp_directory_path.html "cpp/experimental/fs/temp directory path")  
  
File types  
| [filesystem::is_block_file](is_block_file.html "cpp/experimental/fs/is block file")  
---  
[filesystem::is_character_file](is_character_file.html "cpp/experimental/fs/is character file")  
[filesystem::is_directory](is_directory.html "cpp/experimental/fs/is directory")  
[filesystem::is_empty](is_empty.html "cpp/experimental/fs/is empty")  
[filesystem::status_known](status_known.html "cpp/experimental/fs/status known")  
  
| [filesystem::is_fifo](is_fifo.html "cpp/experimental/fs/is fifo")  
---  
[filesystem::is_other](is_other.html "cpp/experimental/fs/is other")  
[filesystem::is_regular_file](is_regular_file.html "cpp/experimental/fs/is regular file")  
[filesystem::is_socket](is_socket.html "cpp/experimental/fs/is socket")  
[filesystem::is_symlink](is_symlink.html "cpp/experimental/fs/is symlink")  
  


Defined in header `[<experimental/filesystem>](../../header/experimental/filesystem.html "cpp/header/experimental/filesystem")` |  |   
---|---|---  
void copy( const path& from, const path& to );  
void copy( const path& from, const path& to, error_code& ec ); |  (1)  |  (filesystem TS)  
void copy( const path& from, const path& to, copy_options options );  
void copy( const path& from, const path& to, copy_options options, error_code& ec ); |  (2)  |  (filesystem TS)  
| |   
  
Copies files and directories, with a variety of options: 

1) The default, equivalent to (2) with `copy_options::none` used as options.

2) Copies the file or directory from to file or directory to, using the copy options indicated by options. The behavior is undefined if there is more than one option in any of the [copy_options](copy_options.html "cpp/experimental/fs/copy options") option group present in options (even in the `copy_file` group, which is not relevant to `copy`).

The behavior is as follows: 

  * First, before doing anything else, obtains type and permissions of from by no more than single call to [`status`](status.html "cpp/experimental/fs/status") (or, if `copy_options::skip_symlinks` or `copy_options::create_symlinks` are present in options, by a call to `symlink_status`). 
  * If necessary, obtains the status of to the same way, by no more than a single status or symlink_status call. 
  * If from does not exist, reports an error. 
  * If from and to are the same file as determined by [`equivalent()`](equivalent.html "cpp/experimental/fs/equivalent"), reports an error. 
  * If either from or to is not a regular file, a directory, or a symlink, as determined by [`is_other`](is_other.html "cpp/experimental/fs/is other"), reports an error. 
  * If from is a directory, but to is a regular file, reports an error. 
  * If from is a symbolic link, then 



    

  * If `copy_options::skip_symlink` is present in options, does nothing. 
  * Otherwise, if to does not exist and `copy_options::copy_symlinks` is present in options, then behaves as if copy_symlink(from, to). 
  * Otherwise, reports an error. 



  * Otherwise, if from is a regular file, then 



    

  * If `copy_options::directories_only` is present in options, does nothing. 
  * Otherwise, if `copy_options::create_symlinks` is present in options, creates a symlink to to. Note: from must be an absolute path unless to is in the current directory. 
  * Otherwise, if `copy_options::create_hard_links` is present in options, creates a hard link to to. 
  * Otherwise, if to is a directory, then behaves as if copy_file(from, to/from.filename(), options) (creates a copy of from as a file in the directory to). 
  * Otherwise, behaves as if copy_file(from, to, options) (copies the file). 



  * Otherwise, if from is a directory and either options has `copy_options::recursive` or is `copy_options::none`. 



    

  * If to does not exist, first executes create_directory(to, from) (creates the new directory with a copy of the old directory's attributes). 
  * Then, whether to already existed or was just created, iterates over the files contained in from as if by for (const directory_entry& x : directory_iterator(from)) and for each directory entry, recursively calls copy(x.path(), to/x.path().filename(), options | unspecified), where _unspecified_ is a special bit that has no other effect when set in options (the sole purpose of setting this bit is to prevent recursive copying subdirectories if options is `copy_options::none`). 



  * Otherwise does nothing. 



## Contents

  * [1 Parameters](copy.html#Parameters)
  * [2 Return value](copy.html#Return_value)
  * [3 Exceptions](copy.html#Exceptions)
  * [4 Notes](copy.html#Notes)
  * [5 Example](copy.html#Example)
  * [6 See also](copy.html#See_also)

  
---  
  
### Parameters

from  |  \-  |  path to the source file, directory, or symlink   
---|---|---  
to  |  \-  |  path to the target file, directory, or symlink   
ec  |  \-  |  out-parameter for error reporting in the non-throwing overload   
  
### Return value

(none) 

### Exceptions

The overload that does not take an error_code& parameter throws [filesystem_error](filesystem_error.html "cpp/experimental/fs/filesystem error") on underlying OS API errors, constructed with from as the first argument, to as the second argument, and the OS error code as the error code argument. [std::bad_alloc](../../memory/new/bad_alloc.html) may be thrown if memory allocation fails. The overload taking an error_code& parameter sets it to the OS API error code if an OS API call fails, and executes ec.clear() if no errors occur. This overload has 

[`noexcept`](../../language/noexcept_spec.html "cpp/language/noexcept spec") specification: 

noexcept

### Notes

The default behavior when copying directories is the non-recursive copy: the files are copied, but not the subdirectories: 
    
    
    // Given
    // /dir1 contains /dir1/file1, /dir1/file2, /dir1/dir2
    // and /dir1/dir2 contains /dir1/dir2/file3
    // After
    std::experimental::filesystem::copy("/dir1", "/dir3");
    // /dir3 is created (with the attributes of /dir1)
    // /dir1/file1 is copied to /dir3/file1
    // /dir1/file2 is copied to /dir3/file2

While with `copy_options::recursive`, the subdirectories are also copied, with their content, recursively. 
    
    
    // ...but after
    std::experimental::filesystem::copy("/dir1", "/dir3", copy_options::recursive);
    // /dir3 is created (with the attributes of /dir1)
    // /dir1/file1 is copied to /dir3/file1
    // /dir1/file2 is copied to /dir3/file2
    // /dir3/dir2 is created (with the attributes of /dir1/dir2)
    // /dir1/dir2/file3 is copied to /dir3/dir2/file3

### Example

Run this code
    
    
    #include <experimental/filesystem>
    #include <fstream>
    #include <iostream>
    namespace fs = std::experimental::filesystem;
    Â 
    int main()
    {
        fs::create_directories("sandbox/dir/subdir");
        [std::ofstream](../../io/basic_ofstream.html)("sandbox/file1.txt").put('a');
        fs::copy("sandbox/file1.txt", "sandbox/file2.txt"); // copy file
        fs::copy("sandbox/dir", "sandbox/dir2"); // copy directory (non-recursive)
        // sandbox holds 2 files and 2 directories, one of which has a subdirectory
        // sandbox/file1.txt
        // sandbox/file2.txt
        // sandbox/dir2
        // sandbox/dir
        //    sandbox/dir/subdir
        fs::copy("sandbox", "sandbox/copy", fs::copy_options::recursive);
        // sandbox/copy holds copies of the above files and subdirectories
        fs::remove_all("sandbox");
    }

### See also

[ copy_options](copy_options.html "cpp/experimental/fs/copy options") |  specifies semantics of copy operations   
(enum)   
---|---  
[ copy_symlink](copy_symlink.html "cpp/experimental/fs/copy symlink") |  copies a symbolic link   
(function)   
[ copy_file](copy_file.html "cpp/experimental/fs/copy file") |  copies file contents   
(function) 
