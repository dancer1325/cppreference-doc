[[edit template]](https://en.cppreference.com/mwiki/index.php?title=Template:cpp/container/emplace&action=edit)

[C++](../../../cpp.html "cpp")

[Compiler support](../../compiler_support.html "cpp/compiler support")  
---  
[Freestanding and hosted](../../freestanding.html "cpp/freestanding")  
[Language](../../language.html "cpp/language")  
[Standard library](../../standard_library.html "cpp/standard library")  
[Standard library headers](../../headers.html "cpp/header")  
[Named requirements](../../iterator/concepts.html "cpp/named req")  
[Feature test macros](../../experimental/feature_test.html "cpp/feature test") (C++20)  
[Language support library](../../utility.html#Language_support "cpp/utility")  
[Concepts library](../../concepts.html "cpp/concepts") (C++20)  
[Diagnostics library](../../error.html "cpp/error")  
[Memory management library](../../memory.html "cpp/memory")  
[Metaprogramming library](../../meta.html "cpp/meta") (C++11)  
[General utilities library](../../utility.html "cpp/utility")  
[Containers library](../../container.html "cpp/container")  
[Iterators library](../../iterator.html "cpp/iterator")  
[Ranges library](../../ranges.html "cpp/ranges") (C++20)  
[Algorithms library](../../algorithm.html "cpp/algorithm")  
[Strings library](../../string.html "cpp/string")  
[Text processing library](../../text.html "cpp/text")  
[Numerics library](../../numeric.html "cpp/numeric")  
[Date and time library](../../chrono.html "cpp/chrono")  
[Input/output library](../../io.html "cpp/io")  
[Filesystem library](../../filesystem.html "cpp/filesystem") (C++17)  
[Concurrency support library](../../atomic.html "cpp/thread") (C++11)  
[Execution control library](../../experimental/execution.html "cpp/execution") (C++26)  
[Technical specifications](../../experimental.html "cpp/experimental")  
[Symbols index](../../symbol_index.html "cpp/symbol index")  
[External libraries](../../links/libs.html "cpp/links/libs")  
  
[[edit]](https://en.cppreference.com/mwiki/index.php?title=Template:cpp/navbar_content&action=edit)

[Containers library](../../container.html "cpp/container")

[_node-handle_](../node_handle.html "cpp/container/node handle")(C++17)  
---  
[Sequence](../../container.html#Sequence_containers "cpp/container")  
[array](../array.html "cpp/container/array")(C++11)  
[vector](../vector.html "cpp/container/vector")  
[vector<bool>](../vector_bool.html "cpp/container/vector bool")  
[inplace_vector](../inplace_vector.html "cpp/container/inplace vector")(C++26)  
[hive](https://en.cppreference.com/mwiki/index.php?title=cpp/container/hive&action=edit&redlink=1 "cpp/container/hive \(page does not exist\)")(C++26)  
[deque](../deque.html "cpp/container/deque")  
[forward_list](../forward_list.html "cpp/container/forward list")(C++11)  
[list](../list.html "cpp/container/list")  
[Associative](../../container.html#Associative_containers "cpp/container")  
[set](../set.html "cpp/container/set")  
[multiset](../multiset.html "cpp/container/multiset")  
[map](../map.html "cpp/container/map")  
[multimap](../multimap.html "cpp/container/multimap")  
[Unordered associative](../../container.html#Unordered_associative_containers "cpp/container")  
[unordered_set](../unordered_set.html "cpp/container/unordered set")(C++11)  
[unordered_multiset](../unordered_multiset.html "cpp/container/unordered multiset")(C++11)  
[unordered_map](../unordered_map.html "cpp/container/unordered map")(C++11)  
[unordered_multimap](../unordered_multimap.html "cpp/container/unordered multimap")(C++11)  
[Adaptors](../../container.html#Container_adaptors "cpp/container")  
[stack](../stack.html "cpp/container/stack")  
[queue](../queue.html "cpp/container/queue")  
[priority_queue](../priority_queue.html "cpp/container/priority queue")  
[flat_set](../flat_set.html "cpp/container/flat set")(C++23)  
[flat_multiset](../flat_multiset.html "cpp/container/flat multiset")(C++23)  
[flat_map](../flat_map.html "cpp/container/flat map")(C++23)  
[flat_multimap](../flat_multimap.html "cpp/container/flat multimap")(C++23)  
[Views](../../container.html#Views "cpp/container")  
[span](../span.html "cpp/container/span")(C++20)  
[mdspan](../mdspan.html "cpp/container/mdspan")(C++23)  
Tables  
[Iterator invalidation](../../container.html#Iterator_invalidation "cpp/container")  
[Member function table](../../container.html#Member_function_table "cpp/container")  
[Non-member function table](../../container.html#Non-member_function_table "cpp/container")  
  
[[edit]](https://en.cppreference.com/mwiki/index.php?title=Template:cpp/container/navbar_content&action=edit)

[`std::deque`](../deque.html "cpp/container/deque")

[Member types](../deque.html#Member_types "cpp/container/deque")  
---  
[Member functions](../deque.html#Member_functions "cpp/container/deque")  
| [deque::deque](deque.html "cpp/container/deque/deque")  
---  
[deque::~deque](~deque.html "cpp/container/deque/~deque")  
[deque::operator=](operator=.html "cpp/container/deque/operator=")  
[deque::assign](assign.html "cpp/container/deque/assign")  
[deque::assign_range](assign_range.html "cpp/container/deque/assign range")(C++23)` `  
[deque::get_allocator](get_allocator.html "cpp/container/deque/get allocator")  
[Element access](../deque.html#Element_access "cpp/container/deque")  
[deque::at](at.html "cpp/container/deque/at")  
[deque::operator[]](operator_at.html "cpp/container/deque/operator at")  
[deque::front](front.html "cpp/container/deque/front")  
[deque::back](back.html "cpp/container/deque/back")  
[Iterators](../deque.html#Iterators "cpp/container/deque")  
[deque::begindeque::cbegin](begin.html "cpp/container/deque/begin")(C++11)  
[deque::enddeque::cend](end.html "cpp/container/deque/end")(C++11)  
[deque::rbegindeque::crbegin](rbegin.html "cpp/container/deque/rbegin")(C++11)  
[deque::renddeque::crend](rend.html "cpp/container/deque/rend")(C++11)  
  
  
  
| [Capacity](../deque.html#Capacity "cpp/container/deque")  
---  
[deque::empty](empty.html "cpp/container/deque/empty")  
[deque::size](size.html "cpp/container/deque/size")  
[deque::max_size](max_size.html "cpp/container/deque/max size")  
[deque::shrink_to_fit](shrink_to_fit.html "cpp/container/deque/shrink to fit")(DR*)  
[Modifiers](../deque.html#Modifiers "cpp/container/deque")  
[deque::clear](clear.html "cpp/container/deque/clear")  
[deque::insert](insert.html "cpp/container/deque/insert")  
[deque::insert_range](insert_range.html "cpp/container/deque/insert range")(C++23)  
**deque::emplace**  
[deque::erase](erase.html "cpp/container/deque/erase")  
[deque::push_front](push_front.html "cpp/container/deque/push front")  
[deque::emplace_front](emplace_front.html "cpp/container/deque/emplace front")(C++11)  
[deque::prepend_range](prepend_range.html "cpp/container/deque/prepend range")(C++23)  
[deque::pop_front](pop_front.html "cpp/container/deque/pop front")  
[deque::push_back](push_back.html "cpp/container/deque/push back")  
[deque::emplace_back](emplace_back.html "cpp/container/deque/emplace back")(C++11)  
[deque::append_range](append_range.html "cpp/container/deque/append range")(C++23)  
[deque::pop_back](pop_back.html "cpp/container/deque/pop back")  
[deque::resize](resize.html "cpp/container/deque/resize")  
[deque::swap](swap.html "cpp/container/deque/swap")  
  
[Non-member functions](../deque.html#Non-member_functions "cpp/container/deque")  
| [operator==operator<=>](operator_cmp.html "cpp/container/deque/operator cmp")(C++20)  
---  
[swap(std::deque)](swap2.html "cpp/container/deque/swap2")  
[erase(std::deque)erase_if(std::deque)](erase2.html "cpp/container/deque/erase2")(C++20)(C++20)  
  
| [operator!=operator<operator>operator<=operator>=](operator_cmp.html "cpp/container/deque/operator cmp")(until C++20)(until C++20)(until C++20)(until C++20)(until C++20)  
---  
  
[Deduction guides](deduction_guides.html "cpp/container/deque/deduction guides")(C++17)  
  
[[edit]](https://en.cppreference.com/mwiki/index.php?title=Template:cpp/container/deque/navbar_content&action=edit)

template< class... Args >  
iterator emplace( const_iterator pos, Args&&... args ); |  | (since C++11)   
(constexpr since C++26)  
---|---|---  
| |   
  
Inserts a new element into the container directly before pos. 

The element is constructed through [std::allocator_traits::construct](../../memory/allocator_traits/construct.html "cpp/memory/allocator traits/construct"), which typically uses placement new to construct the element in-place at a location provided by the container. However, if the required location has been occupied by an existing element, the inserted element is constructed at another location at first, and then move assigned into the required location. 

The arguments args... are forwarded to the constructor as [std::forward](../../utility/forward.html)<Args>(args).... args... may directly or indirectly refer to a value in the container. 

All iterators (including the [`end()`](end.html "cpp/container/deque/end") iterator) are invalidated. References are invalidated too, unless pos ==` `[`begin()`](begin.html "cpp/container/deque/begin") or pos ==` `[`end()`](end.html "cpp/container/deque/end"), in which case they are not invalidated. 

## Contents

  * [1 Parameters](emplace.html#Parameters)
  * [2 Return value](emplace.html#Return_value)
  * [3 Complexity](emplace.html#Complexity)
  * [4 Exceptions](emplace.html#Exceptions)
  * [5 Example](emplace.html#Example)
  * [6 Defect reports](emplace.html#Defect_reports)
  * [7 See also](emplace.html#See_also)

  
---  
  
### [[edit](https://en.cppreference.com/mwiki/index.php?title=Template:cpp/container/emplace&action=edit&section=T-1 "Template:cpp/container/emplace")] Parameters

pos  |  \-  |  iterator before which the new element will be constructed   
---|---|---  
args  |  \-  |  arguments to forward to the constructor of the element   
Type requirements   
-If any of the following conditions is satisfied, the behavior is undefined: 

    

  * `T` is not [EmplaceConstructible](../../named_req/EmplaceConstructible.html "cpp/named req/EmplaceConstructible") into `deque` from args.... 
  * `T` is not [MoveInsertable](../../named_req/MoveInsertable.html "cpp/named req/MoveInsertable") into `deque`. 
  * `T` is not [MoveAssignable](../../named_req/MoveAssignable.html "cpp/named req/MoveAssignable"). 

  
  
### [[edit](https://en.cppreference.com/mwiki/index.php?title=Template:cpp/container/emplace&action=edit&section=T-2 "Template:cpp/container/emplace")] Return value

Iterator pointing to the emplaced element. 

### [[edit](https://en.cppreference.com/mwiki/index.php?title=Template:cpp/container/emplace&action=edit&section=T-3 "Template:cpp/container/emplace")] Complexity

Linear in the lesser of the distances between pos and either of the ends of the container. 

### [[edit](https://en.cppreference.com/mwiki/index.php?title=Template:cpp/container/emplace&action=edit&section=T-4 "Template:cpp/container/emplace")] Exceptions

If an exception is thrown other than by the copy constructor, move constructor, assignment operator, or move assignment operator of the `T`, or if an exception is thrown while `emplace` is used to insert a single element at the either end, there are no effects (strong exception guarantee). 

Otherwise, the effects are unspecified. 

###  Example

Run this code
    
    
    #include <iostream>
    #include <string>
    #include <deque>
     
    struct A
    {
        [std::string](../../string/basic_string.html) s;
     
        A([std::string](../../string/basic_string.html) str) : s(std::move(str)) { [std::cout](../../io/cout.html) << " constructed\n"; }
     
        A(const A& o) : s(o.s) { [std::cout](../../io/cout.html) << " copy constructed\n"; }
     
        A(A&& o) : s(std::move(o.s)) { [std::cout](../../io/cout.html) << " move constructed\n"; }
     
        A& operator=(const A& other)
        {
            s = other.s;
            [std::cout](../../io/cout.html) << " copy assigned\n";
            return *this;
        }
     
        A& operator=(A&& other)
        {
            s = std::move(other.s);
            [std::cout](../../io/cout.html) << " move assigned\n";
            return *this;
        }
    };
     
    int main()
    {
        [std::deque](../deque.html)<A> container;
     
        [std::cout](../../io/cout.html) << "construct 2 times A:\n";
        A two{"two"};
        A three{"three"};
     
        [std::cout](../../io/cout.html) << "emplace:\n";
        container.emplace(container.end(), "one");
     
        [std::cout](../../io/cout.html) << "emplace with A&:\n";
        container.emplace(container.end(), two);
     
        [std::cout](../../io/cout.html) << "emplace with A&&:\n";
        container.emplace(container.end(), std::move(three));
     
        [std::cout](../../io/cout.html) << "content:\n";
        for (const auto& obj : container)
            [std::cout](../../io/cout.html) << ' ' << obj.s;
        [std::cout](../../io/cout.html) << '\n';
    }

Output: 
    
    
    construct 2 times A:
     constructed
     constructed
    emplace:
     constructed
    emplace with A&:
     copy constructed
    emplace with A&&:
     move constructed
    content:
     one two three

### [[edit](https://en.cppreference.com/mwiki/index.php?title=Template:cpp/container/emplace&action=edit&section=T-6 "Template:cpp/container/emplace")] Defect reports

The following behavior-changing defect reports were applied retroactively to previously published C++ standards. 

DR  | Applied to  | Behavior as published  | Correct behavior   
---|---|---|---  
[LWG 2164](https://cplusplus.github.io/LWG/issue2164) | C++11  | it was unclear whether the arguments can refer to the container  | made clear   
  
### [[edit](https://en.cppreference.com/mwiki/index.php?title=Template:cpp/container/emplace&action=edit&section=T-7 "Template:cpp/container/emplace")] See also

[ insert](insert.html "cpp/container/deque/insert") |  inserts elements   
(public member function) [[edit]](https://en.cppreference.com/mwiki/index.php?title=Template:cpp/container/dsc_insert&action=edit)  
---|---  
[ emplace_back](emplace_back.html "cpp/container/deque/emplace back")(C++11) |  constructs an element in-place at the end   
(public member function) [[edit]](https://en.cppreference.com/mwiki/index.php?title=Template:cpp/container/dsc_emplace_back&action=edit)
