[[edit template]](https://en.cppreference.com/mwiki/index.php?title=Template:cpp/container/emplace_hint&action=edit)

[C++](../../../cpp.html "cpp")

[Compiler support](../../compiler_support.html "cpp/compiler support")  
---  
[Freestanding and hosted](../../freestanding.html "cpp/freestanding")  
[Language](../../language.html "cpp/language")  
[Standard library](../../standard_library.html "cpp/standard library")  
[Standard library headers](../../headers.html "cpp/header")  
[Named requirements](../../iterator/concepts.html "cpp/named req")  
[Feature test macros](../../experimental/feature_test.html "cpp/feature test") (C++20)  
[Language support library](../../utility.html#Language_support "cpp/utility")  
[Concepts library](../../concepts.html "cpp/concepts") (C++20)  
[Diagnostics library](../../error.html "cpp/error")  
[Memory management library](../../memory.html "cpp/memory")  
[Metaprogramming library](../../meta.html "cpp/meta") (C++11)  
[General utilities library](../../utility.html "cpp/utility")  
[Containers library](../../container.html "cpp/container")  
[Iterators library](../../iterator.html "cpp/iterator")  
[Ranges library](../../ranges.html "cpp/ranges") (C++20)  
[Algorithms library](../../algorithm.html "cpp/algorithm")  
[Strings library](../../string.html "cpp/string")  
[Text processing library](../../text.html "cpp/text")  
[Numerics library](../../numeric.html "cpp/numeric")  
[Date and time library](../../chrono.html "cpp/chrono")  
[Input/output library](../../io.html "cpp/io")  
[Filesystem library](../../filesystem.html "cpp/filesystem") (C++17)  
[Concurrency support library](../../atomic.html "cpp/thread") (C++11)  
[Execution control library](../../experimental/execution.html "cpp/execution") (C++26)  
[Technical specifications](../../experimental.html "cpp/experimental")  
[Symbols index](../../symbol_index.html "cpp/symbol index")  
[External libraries](../../links/libs.html "cpp/links/libs")  
  


[Containers library](../../container.html "cpp/container")

[_node-handle_](../node_handle.html "cpp/container/node handle")(C++17)  
---  
[Sequence](../../container.html#Sequence_containers "cpp/container")  
[array](../array.html "cpp/container/array")(C++11)  
[vector](../vector.html "cpp/container/vector")  
[vector<bool>](../vector_bool.html "cpp/container/vector bool")  
[inplace_vector](../inplace_vector.html "cpp/container/inplace vector")(C++26)  
[hive](https://en.cppreference.com/mwiki/index.php?title=cpp/container/hive&action=edit&redlink=1 "cpp/container/hive \(page does not exist\)")(C++26)  
[deque](../deque.html "cpp/container/deque")  
[forward_list](../forward_list.html "cpp/container/forward list")(C++11)  
[list](../list.html "cpp/container/list")  
[Associative](../../container.html#Associative_containers "cpp/container")  
[set](../set.html "cpp/container/set")  
[multiset](../multiset.html "cpp/container/multiset")  
[map](../map.html "cpp/container/map")  
[multimap](../multimap.html "cpp/container/multimap")  
[Unordered associative](../../container.html#Unordered_associative_containers "cpp/container")  
[unordered_set](../unordered_set.html "cpp/container/unordered set")(C++11)  
[unordered_multiset](../unordered_multiset.html "cpp/container/unordered multiset")(C++11)  
[unordered_map](../unordered_map.html "cpp/container/unordered map")(C++11)  
[unordered_multimap](../unordered_multimap.html "cpp/container/unordered multimap")(C++11)  
[Adaptors](../../container.html#Container_adaptors "cpp/container")  
[stack](../stack.html "cpp/container/stack")  
[queue](../queue.html "cpp/container/queue")  
[priority_queue](../priority_queue.html "cpp/container/priority queue")  
[flat_set](../flat_set.html "cpp/container/flat set")(C++23)  
[flat_multiset](../flat_multiset.html "cpp/container/flat multiset")(C++23)  
[flat_map](../flat_map.html "cpp/container/flat map")(C++23)  
[flat_multimap](../flat_multimap.html "cpp/container/flat multimap")(C++23)  
[Views](../../container.html#Views "cpp/container")  
[span](../span.html "cpp/container/span")(C++20)  
[mdspan](../mdspan.html "cpp/container/mdspan")(C++23)  
Tables  
[Iterator invalidation](../../container.html#Iterator_invalidation "cpp/container")  
[Member function table](../../container.html#Member_function_table "cpp/container")  
[Non-member function table](../../container.html#Non-member_function_table "cpp/container")  
  


[`std::flat_set`](../flat_set.html "cpp/container/flat set")

[Member types](../flat_set.html#Member_types "cpp/container/flat set")  
---  
[Member functions](../flat_set.html#Member_functions "cpp/container/flat set")  
|  | [flat_set::flat_set](flat_set.html "cpp/container/flat set/flat set")  
---  
[flat_set::operator=](operator=.html "cpp/container/flat set/operator=")  
[Iterators](../flat_set.html#Iterators "cpp/container/flat set")  
[flat_set::beginflat_set::cbegin](begin.html "cpp/container/flat set/begin")  
[flat_set::endflat_set::cend](end.html "cpp/container/flat set/end")  
[flat_set::rbeginflat_set::crbegin](rbegin.html "cpp/container/flat set/rbegin")  
[flat_set::rendflat_set::crend](rend.html "cpp/container/flat set/rend")  
[Capacity](../flat_set.html#Capacity "cpp/container/flat set")  
[flat_set::size](size.html "cpp/container/flat set/size")  
[flat_set::max_size](max_size.html "cpp/container/flat set/max size")  
[flat_set::empty](empty.html "cpp/container/flat set/empty")  
[Observers](../flat_set.html#Observers "cpp/container/flat set")  
[flat_set::key_comp](key_comp.html "cpp/container/flat set/key comp")  
[flat_set::value_comp](value_comp.html "cpp/container/flat set/value comp")  
  
| [Modifiers](../flat_set.html#Modifiers "cpp/container/flat set")  
---  
[flat_set::clear](clear.html "cpp/container/flat set/clear")  
[flat_set::insert](insert.html "cpp/container/flat set/insert")  
[flat_set::insert_range](insert_range.html "cpp/container/flat set/insert range")  
[flat_set::emplace](emplace.html "cpp/container/flat set/emplace")  
**flat_set::emplace_hint**  
[flat_set::erase](erase.html "cpp/container/flat set/erase")  
[flat_set::swap](swap.html "cpp/container/flat set/swap")  
[flat_set::extract](extract.html "cpp/container/flat set/extract")  
[flat_set::replace](replace.html "cpp/container/flat set/replace")  
[Lookup](../flat_set.html#Lookup "cpp/container/flat set")  
[flat_set::count](count.html "cpp/container/flat set/count")  
[flat_set::find](find.html "cpp/container/flat set/find")  
[flat_set::contains](contains.html "cpp/container/flat set/contains")  
[flat_set::equal_range](equal_range.html "cpp/container/flat set/equal range")  
[flat_set::lower_bound](lower_bound.html "cpp/container/flat set/lower bound")  
[flat_set::upper_bound](upper_bound.html "cpp/container/flat set/upper bound")  
  
[Non-member functions](../flat_set.html#Non-member_functions "cpp/container/flat set")  
| [operator==operator<=>](operator_cmp.html "cpp/container/flat set/operator cmp")  
---  
  
| [swap(std::flat_set)](swap2.html "cpp/container/flat set/swap2")  
---  
[erase_if(std::flat_set)](erase_if.html "cpp/container/flat set/erase if")  
  
[Helper classes](../flat_set.html#Helper_classes "cpp/container/flat set")  
[uses_allocator<std::flat_set>](uses_allocator.html "cpp/container/flat set/uses allocator")  
[Tags](../flat_set.html#Tags "cpp/container/flat set")  
|  | [sorted_unique](../sorted_unique.html "cpp/container/sorted unique")` `  
---  
  
| [sorted_unique_t](../sorted_unique.html "cpp/container/sorted unique")  
---  
  
[Deduction guides](deduction_guides.html "cpp/container/flat set/deduction guides")  
  


template< class... Args >  
iterator emplace_hint( const_iterator hint, Args&&... args ); |  | (since C++23)   
(constexpr since C++26)  
---|---|---  
| |   
  
Inserts a new element into the container as close as possible to the position just before hint. 

The constructors of the key and mapped value are called with exactly the same arguments as supplied to the function, forwarded with [std::forward](../../utility/forward.html)<Args>(args).... 

| Information on iterator invalidation is copied from [here](https://en.cppreference.com/w/Template:cpp/container/note_iterator_invalidation "Template:cpp/container/note iterator invalidation")  
---|---  
  
## Contents

  * [1 Parameters](emplace_hint.html#Parameters)
  * [2 Return value](emplace_hint.html#Return_value)
  * [3 Exceptions](emplace_hint.html#Exceptions)
  * [4 Complexity](emplace_hint.html#Complexity)
  * [5 Example](emplace_hint.html#Example)
  * [6 See also](emplace_hint.html#See_also)

  
---  
  
### Parameters

hint  |  \-  |  iterator to the position before which the new element will be inserted   
---|---|---  
args  |  \-  |  arguments to forward to the constructor of the element   
  
### Return value

An iterator to the inserted element, or to the element that prevented the insertion. 

### Exceptions

If an exception is thrown for any reason, this function has no effect ([strong exception safety guarantee](../../language/exceptions.html#Exception_safety "cpp/language/exceptions")). 

### Complexity

| This section is incomplete   
---|---  
  
### Example

Run this code
    
    
    #include <chrono>
    #include <cstddef>
    #include <functional>
    #include <iomanip>
    #include <iostream>
    #include <flat_set>
     
    const int n_operations = 1005000;
     
    [std::size_t](../../types/size_t.html) set_emplace()
    {
        [std::flat_set](../flat_set.html)<int> set;
        for (int i = 0; i < n_operations; ++i)
            set.emplace(i);
        return set.size();
    }
     
    [std::size_t](../../types/size_t.html) set_emplace_hint()
    {
        [std::flat_set](../flat_set.html)<int> set;
        auto it = set.begin();
        for (int i = 0; i < n_operations; ++i)
        {
            set.emplace_hint(it, i);
            it = set.end();
        }
        return set.size();
    }
     
    [std::size_t](../../types/size_t.html) set_emplace_hint_wrong()
    {
        [std::flat_set](../flat_set.html)<int> set;
        auto it = set.begin();
        for (int i = n_operations; i > 0; --i)
        {
            set.emplace_hint(it, i);
            it = set.end();
        }
        return set.size();
    }
     
    [std::size_t](../../types/size_t.html) set_emplace_hint_corrected()
    {
        [std::flat_set](../flat_set.html)<int> set;
        auto it = set.begin();
        for (int i = n_operations; i > 0; --i)
        {
            set.emplace_hint(it, i);
            it = set.begin();
        }
        return set.size();
    }
     
    [std::size_t](../../types/size_t.html) set_emplace_hint_closest()
    {
        [std::flat_set](../flat_set.html)<int> set;
        auto it = set.begin();
        for (int i = 0; i < n_operations; ++i)
            it = set.emplace_hint(it, i);
        return set.size();
    }
     
    double time_it([std::function](../../utility/functional/function.html)<[std::size_t](../../types/size_t.html)()> set_test,
                   const char* what = nullptr,
                   double ratio = 0.0)
    {
        const auto start = [std::chrono::system_clock::now](../../chrono/system_clock/now.html)();
        const [std::size_t](../../types/size_t.html) setsize = set_test();
        const auto stop = [std::chrono::system_clock::now](../../chrono/system_clock/now.html)();
        const [std::chrono::duration](../../chrono/duration.html)<double, [std::milli](../../numeric/ratio/ratio.html)> time = stop - start;
        if (what != nullptr && setsize > 0)
            [std::cout](../../io/cout.html) << [std::setw](../../io/manip/setw.html)(8) << time << " for " << what << " (ratio: "
                      << (ratio == 0.0 ? 1.0 : ratio / time.count()) << ")\n";
        return time.count();
    }
     
    int main()
    {
        [std::cout](../../io/cout.html) << [std::fixed](../../io/manip/fixed.html) << [std::setprecision](../../io/manip/setprecision.html)(2);
        time_it(set_emplace); // cache warmup
        const auto x = time_it(set_emplace, "plain emplace");
        time_it(set_emplace_hint, "emplace with correct hint", x);
        time_it(set_emplace_hint_wrong, "emplace with wrong hint", x);
        time_it(set_emplace_hint_corrected, "corrected emplace", x);
        time_it(set_emplace_hint_closest, "emplace using returned iterator", x);
    }

Possible output: 
    
    
    ...TODO...

### See also

[ emplace](emplace.html "cpp/container/flat set/emplace") |  constructs element in-place   
(public member function)   
---|---  
[ insert](insert.html "cpp/container/flat set/insert") |  inserts elements   
(public member function) 
