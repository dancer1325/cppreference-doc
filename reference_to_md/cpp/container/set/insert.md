[C++](../../../cpp.html "cpp")

[Compiler support](../../compiler_support.html "cpp/compiler support")  
---  
[Freestanding and hosted](../../freestanding.html "cpp/freestanding")  
[Language](../../language.html "cpp/language")  
[Standard library](../../standard_library.html "cpp/standard library")  
[Standard library headers](../../headers.html "cpp/header")  
[Named requirements](../../iterator/concepts.html "cpp/named req")  
[Feature test macros](../../experimental/feature_test.html "cpp/feature test") (C++20)  
[Language support library](../../utility.html#Language_support "cpp/utility")  
[Concepts library](../../concepts.html "cpp/concepts") (C++20)  
[Diagnostics library](../../error.html "cpp/error")  
[Memory management library](../../memory.html "cpp/memory")  
[Metaprogramming library](../../meta.html "cpp/meta") (C++11)  
[General utilities library](../../utility.html "cpp/utility")  
[Containers library](../../container.html "cpp/container")  
[Iterators library](../../iterator.html "cpp/iterator")  
[Ranges library](../../ranges.html "cpp/ranges") (C++20)  
[Algorithms library](../../algorithm.html "cpp/algorithm")  
[Strings library](../../string.html "cpp/string")  
[Text processing library](../../text.html "cpp/text")  
[Numerics library](../../numeric.html "cpp/numeric")  
[Date and time library](../../chrono.html "cpp/chrono")  
[Input/output library](../../io.html "cpp/io")  
[Filesystem library](../../filesystem.html "cpp/filesystem") (C++17)  
[Concurrency support library](../../atomic.html "cpp/thread") (C++11)  
[Execution control library](../../experimental/execution.html "cpp/execution") (C++26)  
[Technical specifications](../../experimental.html "cpp/experimental")  
[Symbols index](../../symbol_index.html "cpp/symbol index")  
[External libraries](../../links/libs.html "cpp/links/libs")  
  
[[edit]](https://en.cppreference.com/mwiki/index.php?title=Template:cpp/navbar_content&action=edit)

[Containers library](../../container.html "cpp/container")

[_node-handle_](../node_handle.html "cpp/container/node handle")(C++17)  
---  
[Sequence](../../container.html#Sequence_containers "cpp/container")  
[array](../array.html "cpp/container/array")(C++11)  
[vector](../vector.html "cpp/container/vector")  
[vector<bool>](../vector_bool.html "cpp/container/vector bool")  
[inplace_vector](../inplace_vector.html "cpp/container/inplace vector")(C++26)  
[hive](https://en.cppreference.com/mwiki/index.php?title=cpp/container/hive&action=edit&redlink=1 "cpp/container/hive（页面不存在）")(C++26)  
[deque](../deque.html "cpp/container/deque")  
[forward_list](../forward_list.html "cpp/container/forward list")(C++11)  
[list](../list.html "cpp/container/list")  
[Associative](../../container.html#Associative_containers "cpp/container")  
[set](../set.html "cpp/container/set")  
[multiset](../multiset.html "cpp/container/multiset")  
[map](../map.html "cpp/container/map")  
[multimap](../multimap.html "cpp/container/multimap")  
[Unordered associative](../../container.html#Unordered_associative_containers "cpp/container")  
[unordered_set](../unordered_set.html "cpp/container/unordered set")(C++11)  
[unordered_multiset](../unordered_multiset.html "cpp/container/unordered multiset")(C++11)  
[unordered_map](../unordered_map.html "cpp/container/unordered map")(C++11)  
[unordered_multimap](../unordered_multimap.html "cpp/container/unordered multimap")(C++11)  
[Adaptors](../../container.html#Container_adaptors "cpp/container")  
[stack](../stack.html "cpp/container/stack")  
[queue](../queue.html "cpp/container/queue")  
[priority_queue](../priority_queue.html "cpp/container/priority queue")  
[flat_set](../flat_set.html "cpp/container/flat set")(C++23)  
[flat_multiset](../flat_multiset.html "cpp/container/flat multiset")(C++23)  
[flat_map](../flat_map.html "cpp/container/flat map")(C++23)  
[flat_multimap](../flat_multimap.html "cpp/container/flat multimap")(C++23)  
[Views](../../container.html#Views "cpp/container")  
[span](../span.html "cpp/container/span")(C++20)  
[mdspan](../mdspan.html "cpp/container/mdspan")(C++23)  
Tables  
[Iterator invalidation](../../container.html#Iterator_invalidation "cpp/container")  
[Member function table](../../container.html#Member_function_table "cpp/container")  
[Non-member function table](../../container.html#Non-member_function_table "cpp/container")  
  
[[edit]](https://en.cppreference.com/mwiki/index.php?title=Template:cpp/container/navbar_content&action=edit)

[`std::set`](../set.html "cpp/container/set")

[Member functions](../set.html#Member_functions "cpp/container/set")  
---  
|  | [set::set](set.html "cpp/container/set/set")  
---  
[set::~set](~set.html "cpp/container/set/~set")` `  
  
| [set::operator=](operator=.html "cpp/container/set/operator=")  
---  
[set::get_allocator](get_allocator.html "cpp/container/set/get allocator")  
  
|  | [Iterators](../set.html#Iterators "cpp/container/set")  
---  
[set::beginset::cbegin](begin.html "cpp/container/set/begin")(C++11)  
[set::endset::cend](end.html "cpp/container/set/end")(C++11)  
[set::rbeginset::crbegin](rbegin.html "cpp/container/set/rbegin")(C++11)` `  
[set::rendset::crend](rend.html "cpp/container/set/rend")(C++11)  
[Capacity](../set.html#Capacity "cpp/container/set")  
[set::size](size.html "cpp/container/set/size")  
[set::max_size](max_size.html "cpp/container/set/max size")  
[set::empty](empty.html "cpp/container/set/empty")  
[Observers](../set.html#Observers "cpp/container/set")  
[set::key_comp](key_comp.html "cpp/container/set/key comp")  
[set::value_comp](value_comp.html "cpp/container/set/value comp")  
  
| [Modifiers](../set.html#Modifiers "cpp/container/set")  
---  
[set::clear](clear.html "cpp/container/set/clear")  
[set::erase](erase.html "cpp/container/set/erase")  
[set::swap](swap.html "cpp/container/set/swap")  
[set::extract](extract.html "cpp/container/set/extract")(C++17)  
[set::merge](merge.html "cpp/container/set/merge")(C++17)  
**set::insert**  
[set::insert_range](insert_range.html "cpp/container/set/insert range")(C++23)  
[set::emplace](emplace.html "cpp/container/set/emplace")(C++11)  
[set::emplace_hint](emplace_hint.html "cpp/container/set/emplace hint")(C++11)  
[Lookup](../set.html#Lookup "cpp/container/set")  
[set::count](count.html "cpp/container/set/count")  
[set::find](find.html "cpp/container/set/find")  
[set::contains](contains.html "cpp/container/set/contains")(C++20)` `  
[set::equal_range](equal_range.html "cpp/container/set/equal range")  
[set::lower_bound](lower_bound.html "cpp/container/set/lower bound")  
[set::upper_bound](upper_bound.html "cpp/container/set/upper bound")  
  
[Non-member functions](../set.html#Non-member_functions "cpp/container/set")  
|  | [operator==operator<=>](operator_cmp.html "cpp/container/set/operator cmp")(C++20)  
---  
[std::swap(std::set)](swap2.html "cpp/container/set/swap2")  
[erase_if(std::set)](erase_if.html "cpp/container/set/erase if")(C++20)` `  
  
  
  
| [operator!=operator<operator>operator<=operator>=](operator_cmp.html "cpp/container/set/operator cmp")(until C++20)(until C++20)(until C++20)(until C++20)(until C++20)  
---  
  
[Deduction guides](deduction_guides.html "cpp/container/set/deduction guides")(C++17)  
  
[[edit]](https://en.cppreference.com/mwiki/index.php?title=Template:cpp/container/set/navbar_content&action=edit)

[std::pair](../../utility/pair.html)<iterator, bool> insert( const value_type& value ); |  (1) | (constexpr since C++26)  
---|---|---  
[std::pair](../../utility/pair.html)<iterator, bool> insert( value_type&& value ); |  (2) | (since C++11)   
(constexpr since C++26)  
| (3) |   
iterator insert( iterator pos, const value_type& value ); |  |  (until C++11)  
iterator insert( const_iterator pos, const value_type& value ); |  | (since C++11)   
(constexpr since C++26)  
iterator insert( const_iterator pos, value_type&& value ); |  (4) | (since C++11)   
(constexpr since C++26)  
template< class InputIt >  
void insert( InputIt first, InputIt last ); |  (5) | (constexpr since C++26)  
void insert( [std::initializer_list](../../utility/initializer_list.html)<value_type> ilist ); |  (6) | (since C++11)   
(constexpr since C++26)  
insert_return_type insert( node_type&& nh ); |  (7) | (since C++17)   
(constexpr since C++26)  
iterator insert( const_iterator pos, node_type&& nh ); |  (8) | (since C++17)   
(constexpr since C++26)  
template< class K >  
[std::pair](../../utility/pair.html)<iterator, bool> insert( K&& x ); |  (9) | (since C++23)   
(constexpr since C++26)  
template< class K >  
iterator insert( const_iterator pos, K&& x ); |  (10) | (since C++23)   
(constexpr since C++26)  
| |   
  
Attempts to insert element(s) into *this. 

  * If *this already contain an element with an equivalent key, does nothing. 
  * Otherwise, inserts the element(s) into *this. 



1-4) Inserts value. If pos is provided, value will be inserted as close as possible to the position just prior to pos.  1,3) If `value_type` is not [CopyInsertable](../../named_req/CopyInsertable.html "cpp/named req/CopyInsertable") into `set`, the behavior is undefined. 2,4) If `value_type` is not [MoveInsertable](../../named_req/MoveInsertable.html "cpp/named req/MoveInsertable") into `set`, the behavior is undefined. | (since C++11)  
---|---  
  
5) Inserts elements from range `[`first`, `last`)`.

If any of the following conditions is satisfied, the behavior is undefined: 

  * `value_type` is not [EmplaceConstructible](../../named_req/EmplaceConstructible.html "cpp/named req/EmplaceConstructible") into `set` from *first. 

| (since C++11)  
---|---  
  
  * first or last is an iterator into *this.



6) Inserts elements from initializer list ilist.

Equivalent to insert(ilist.begin(), ilist.end()).

7) If nh is an empty [node handle](../node_handle.html "cpp/container/node handle"), does nothing. Otherwise, inserts the element owned by nh into the container , if the container doesn't already contain an element with a key equivalent to nh.key(). The behavior is undefined if nh is not empty and get_allocator() != nh.get_allocator().

8) If nh is an empty [node handle](../node_handle.html "cpp/container/node handle"), does nothing and returns the end iterator. Otherwise, inserts the element owned by nh into the container, if the container doesn't already contain an element with a key equivalent to nh.key(), and returns the iterator pointing to the element with key equivalent to nh.key()(regardless of whether the insert succeeded or failed). If the insertion succeeds, nh is moved from, otherwise it retains ownership of the element. The element is inserted as close as possible to the position just prior to pos. The behavior is undefined if nh is not empty and get_allocator() != nh.get_allocator().

9,10) Constructs an object u of type `value_type` with [std::forward](../../utility/forward.html)<K>(x) and then inserts u into *this. The existence of the equivalent key is determined transparently using x before constructing u.

If any of the folllowing conditions is satisfied, the behavior is undefined: 

  * `value_type` is not [EmplaceConstructible](../../named_req/EmplaceConstructible.html "cpp/named req/EmplaceConstructible") into `set` from [std::forward](../../utility/forward.html)<K>(x). 
  * equal_range(u) == equal_range(x) is false.



9) This overload participates in overload resolution only if `Compare` is [transparent](../../functional.html#Transparent_function_objects "cpp/utility/functional").

10) u will be inserted as close as possible to the position just prior to pos.

This overload participates in overload resolution only if all following conditions are satisfied: 

  * `Compare` is [transparent](../../functional.html#Transparent_function_objects "cpp/utility/functional"). 
  * [std::is_convertible_v](../../types/is_convertible.html)<K&&, const_iterator> is false. 
  * [std::is_convertible_v](../../types/is_convertible.html)<K&&, iterator> is false.



No iterators or references are invalidated. If the insertion is successful, pointers and references to the element obtained while it is held in the node handle are invalidated, and pointers and references obtained to that element before it was extracted become valid.(since C++17)

## Contents

  * [1 Parameters](insert.html#Parameters)
  * [2 Return value](insert.html#Return_value)
  * [3 Exceptions](insert.html#Exceptions)
  * [4 Complexity](insert.html#Complexity)
  * [5 Notes](insert.html#Notes)
  * [6 Example](insert.html#Example)
  * [7 Defect reports](insert.html#Defect_reports)
  * [8 See also](insert.html#See_also)

  
---  
  
### [[edit](https://en.cppreference.com/mwiki/index.php?title=cpp/container/set/insert&action=edit&section=1 "Edit section: Parameters")] Parameters

pos  |  \-  |  iterator to the position before which the new element will be inserted   
---|---|---  
value  |  \-  |  element value to insert   
first, last  |  \-  |  the pair of iterators defining the source [range](../../iterator.html#Ranges "cpp/iterator") of elements to insert   
ilist  |  \-  |  initializer list to insert the values from   
nh  |  \-  |  a compatible [node handle](../node_handle.html "cpp/container/node handle")  
x  |  \-  |  a value of any type that can be transparently compared with a key   
Type requirements   
-`InputIt` must meet the requirements of [LegacyInputIterator](../../named_req/InputIterator.html "cpp/named req/InputIterator").   
  
### [[edit](https://en.cppreference.com/mwiki/index.php?title=cpp/container/set/insert&action=edit&section=2 "Edit section: Return value")] Return value

1,2) A pair consisting of an iterator to the inserted element (or to the element that prevented the insertion) and a bool value set to true if and only if the insertion took place.

3,4) An iterator to the inserted element, or to the element that prevented the insertion.

7) An object of [`insert_return_type`](../set.html#Member_types "cpp/container/set") with the members initialized as follows: 

  * If nh is empty, `inserted` is false, `position` is end(), and `node` is empty. 
  * Otherwise if the insertion took place, `inserted` is true, `position` points to the inserted element, and `node` is empty. 
  * If the insertion failed, `inserted` is false, `node` has the previous value of nh, and `position` points to an element with a key equivalent to nh.key().



8) End iterator if nh was empty, iterator pointing to the inserted element if insertion took place, and iterator pointing to an element with a key equivalent to nh.key() if it failed.

9) A pair consisting of an iterator to the inserted element (or to the element that prevented the insertion) and a bool value set to true if and only if the insertion took place.

10) An iterator to the inserted element, or to the element that prevented the insertion.

### [[edit](https://en.cppreference.com/mwiki/index.php?title=cpp/container/set/insert&action=edit&section=3 "Edit section: Exceptions")] Exceptions

If an exception is thrown by any operation during the insertion of a single element, the insertion has no effect. 

### [[edit](https://en.cppreference.com/mwiki/index.php?title=cpp/container/set/insert&action=edit&section=4 "Edit section: Complexity")] Complexity

Given \\(\scriptsize N\\)N as size(): 

1,2) \\(\scriptsize \log(N)\\)log(N)

3,4) Amortized constant if the insertion happens in the position just after(until C++11)before(since C++11) pos, \\(\scriptsize \log(N)\\)log(N) otherwise.

5,6) \\(\scriptsize \log(N + M)\\)log(N+M), where \\(\scriptsize M\\)M is the number of elements to insert.

7) \\(\scriptsize \log(N)\\)log(N)

8) Amortized constant if the insertion happens in the position just before pos, \\(\scriptsize \log(N)\\)log(N) otherwise.

9) \\(\scriptsize \log(N)\\)log(N)

10) Amortized constant if the insertion happens in the position just before pos, \\(\scriptsize \log(N)\\)log(N) otherwise.

### [[edit](https://en.cppreference.com/mwiki/index.php?title=cpp/container/set/insert&action=edit&section=5 "Edit section: Notes")] Notes

The hinted insert (([3,4](insert.html#Version_3)), ([8](insert.html#Version_8)) and ([10](insert.html#Version_10))) does not return a boolean in order to be signature-compatible with positional insert on sequential containers, such as [std::vector::insert](../vector/insert.html "cpp/container/vector/insert"). This makes it possible to create generic inserters such as [std::inserter](../../iterator/inserter.html "cpp/iterator/inserter"). One way to check success of a hinted insert is to compare [`size()`](size.html "cpp/container/set/size") before and after. 

The overloads ([5,6](insert.html#Version_5)) are often implemented as a loop that calls the overload ([3](insert.html#Version_3)) with [end()](end.html "cpp/container/set/end") as the hint; they are optimized for appending a sorted sequence (such as another [std::set](../set.html "cpp/container/set")) whose smallest element is greater than the last element in *this. 

If multiple elements in the range have keys that compare equivalent, it is unspecified which element is inserted (pending [LWG2844](https://cplusplus.github.io/LWG/issue2844)). 

[Feature-test](../../utility/feature_test.html "cpp/utility/feature test") macro  | Value | Std | Feature   
---|---|---|---  
[`__cpp_lib_associative_heterogeneous_insertion`](../../experimental/feature_test.html#cpp_lib_associative_heterogeneous_insertion "cpp/feature test") | [`202311L`](../../compiler_support/26.html#cpp_lib_associative_heterogeneous_insertion_202311L "cpp/compiler support/26") | (C++26) | Heterogeneous overloads for the remaining member functions in [ordered](../../container.html#Associative_containers "cpp/container") and [unordered](../../container.html#Unordered_associative_containers "cpp/container") associative containers. ([9,10](insert.html#Version_9))  
  
### [[edit](https://en.cppreference.com/mwiki/index.php?title=cpp/container/set/insert&action=edit&section=6 "Edit section: Example")] Example

Run this code
    
    
    #include <cassert>
    #include <iostream>
    #include <set>
     
    int main()
    {
        [std::set](../set.html)<int> set;
     
        auto result_1 = set.insert(3);
        [assert](../../error/assert.html)(result_1.first != set.end()); // it is a valid iterator
        [assert](../../error/assert.html)(*result_1.first == 3);
        if (result_1.second)
            [std::cout](../../io/cout.html) << "insert done\n";
     
        auto result_2 = set.insert(3);
        [assert](../../error/assert.html)(result_2.first == result_1.first); // same iterator
        [assert](../../error/assert.html)(*result_2.first == 3);
        if (!result_2.second)
            [std::cout](../../io/cout.html) << "no insertion\n";
    }

Output: 
    
    
    insert done
    no insertion

### [[edit](https://en.cppreference.com/mwiki/index.php?title=cpp/container/set/insert&action=edit&section=7 "Edit section: Defect reports")] Defect reports

The following behavior-changing defect reports were applied retroactively to previously published C++ standards. 

DR  | Applied to  | Behavior as published  | Correct behavior   
---|---|---|---  
[LWG 233](https://cplusplus.github.io/LWG/issue233) | C++98  | pos was just a hint, it could be totally ignored  | the insertion is required to  
be as close as possible to the  
position just prior to pos  
[LWG 264](https://cplusplus.github.io/LWG/issue264) | C++98  | the complexity of overload ([5](insert.html#Version_5)) was required to be linear if  
the range `[`first`, `last`)` is sorted according to `Compare` | removed the linear requirement  
in this special case   
[LWG 316](https://cplusplus.github.io/LWG/issue316) | C++98  | in the return value of overload ([1](insert.html#Version_1)), it was not specified  
which bool value indicates a successful insertion  | success is indicated by true  
  
### [[edit](https://en.cppreference.com/mwiki/index.php?title=cpp/container/set/insert&action=edit&section=8 "Edit section: See also")] See also

[ emplace](emplace.html "cpp/container/set/emplace")(C++11) |  constructs element in-place   
(public member function) [[edit]](https://en.cppreference.com/mwiki/index.php?title=Template:cpp/container/dsc_emplace&action=edit)  
---|---  
[ emplace_hint](emplace_hint.html "cpp/container/set/emplace hint")(C++11) |  constructs elements in-place using a hint   
(public member function) [[edit]](https://en.cppreference.com/mwiki/index.php?title=Template:cpp/container/dsc_emplace_hint&action=edit)  
[ inserter](../../iterator/inserter.html "cpp/iterator/inserter") |  creates a [std::insert_iterator](../../iterator/insert_iterator.html "cpp/iterator/insert iterator") of type inferred from the argument   
(function template) [[edit]](https://en.cppreference.com/mwiki/index.php?title=Template:cpp/iterator/dsc_inserter&action=edit)
  *[Value]: The year/month in which the feature was adopted. The hyperlink under each value opens a compiler support page with entry for given feature.
  *[Std]: Standard in which the feature is introduced; DR means defect report against that revision
