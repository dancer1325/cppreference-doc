[C++](../../../cpp.html "cpp")

[Compiler support](../../compiler_support.html "cpp/compiler support")  
---  
[Freestanding and hosted](../../freestanding.html "cpp/freestanding")  
[Language](../../language.html "cpp/language")  
[Standard library](../../standard_library.html "cpp/standard library")  
[Standard library headers](../../headers.html "cpp/header")  
[Named requirements](../../iterator/concepts.html "cpp/named req")  
[Feature test macros](../../experimental/feature_test.html "cpp/feature test") (C++20)  
[Language support library](../../utility.html#Language_support "cpp/utility")  
[Concepts library](../../concepts.html "cpp/concepts") (C++20)  
[Diagnostics library](../../error.html "cpp/error")  
[Memory management library](../../memory.html "cpp/memory")  
[Metaprogramming library](../../meta.html "cpp/meta") (C++11)  
[General utilities library](../../utility.html "cpp/utility")  
[Containers library](../../container.html "cpp/container")  
[Iterators library](../../iterator.html "cpp/iterator")  
[Ranges library](../../ranges.html "cpp/ranges") (C++20)  
[Algorithms library](../../algorithm.html "cpp/algorithm")  
[Strings library](../../string.html "cpp/string")  
[Text processing library](../../text.html "cpp/text")  
[Numerics library](../../numeric.html "cpp/numeric")  
[Date and time library](../../chrono.html "cpp/chrono")  
[Input/output library](../../io.html "cpp/io")  
[Filesystem library](../../filesystem.html "cpp/filesystem") (C++17)  
[Concurrency support library](../../atomic.html "cpp/thread") (C++11)  
[Execution control library](../../experimental/execution.html "cpp/execution") (C++26)  
[Technical specifications](../../experimental.html "cpp/experimental")  
[Symbols index](../../symbol_index.html "cpp/symbol index")  
[External libraries](../../links/libs.html "cpp/links/libs")  
  
[[edit]](https://en.cppreference.com/mwiki/index.php?title=Template:cpp/navbar_content&action=edit)

[Containers library](../../container.html "cpp/container")

[_node-handle_](../node_handle.html "cpp/container/node handle")(C++17)  
---  
[Sequence](../../container.html#Sequence_containers "cpp/container")  
[array](../array.html "cpp/container/array")(C++11)  
[vector](../vector.html "cpp/container/vector")  
[vector<bool>](../vector_bool.html "cpp/container/vector bool")  
[inplace_vector](../inplace_vector.html "cpp/container/inplace vector")(C++26)  
[hive](https://en.cppreference.com/mwiki/index.php?title=cpp/container/hive&action=edit&redlink=1 "cpp/container/hive \(page does not exist\)")(C++26)  
[deque](../deque.html "cpp/container/deque")  
[forward_list](../forward_list.html "cpp/container/forward list")(C++11)  
[list](../list.html "cpp/container/list")  
[Associative](../../container.html#Associative_containers "cpp/container")  
[set](../set.html "cpp/container/set")  
[multiset](../multiset.html "cpp/container/multiset")  
[map](../map.html "cpp/container/map")  
[multimap](../multimap.html "cpp/container/multimap")  
[Unordered associative](../../container.html#Unordered_associative_containers "cpp/container")  
[unordered_set](../unordered_set.html "cpp/container/unordered set")(C++11)  
[unordered_multiset](../unordered_multiset.html "cpp/container/unordered multiset")(C++11)  
[unordered_map](../unordered_map.html "cpp/container/unordered map")(C++11)  
[unordered_multimap](../unordered_multimap.html "cpp/container/unordered multimap")(C++11)  
[Adaptors](../../container.html#Container_adaptors "cpp/container")  
[stack](../stack.html "cpp/container/stack")  
[queue](../queue.html "cpp/container/queue")  
[priority_queue](../priority_queue.html "cpp/container/priority queue")  
[flat_set](../flat_set.html "cpp/container/flat set")(C++23)  
[flat_multiset](../flat_multiset.html "cpp/container/flat multiset")(C++23)  
[flat_map](../flat_map.html "cpp/container/flat map")(C++23)  
[flat_multimap](../flat_multimap.html "cpp/container/flat multimap")(C++23)  
[Views](../../container.html#Views "cpp/container")  
[span](../span.html "cpp/container/span")(C++20)  
[mdspan](../mdspan.html "cpp/container/mdspan")(C++23)  
Tables  
[Iterator invalidation](../../container.html#Iterator_invalidation "cpp/container")  
[Member function table](../../container.html#Member_function_table "cpp/container")  
[Non-member function table](../../container.html#Non-member_function_table "cpp/container")  
  
[[edit]](https://en.cppreference.com/mwiki/index.php?title=Template:cpp/container/navbar_content&action=edit)

[`std::vector`](../vector.html "cpp/container/vector")

[Member types](../vector.html#Member_types "cpp/container/vector")  
---  
[Member functions](../vector.html#Member_functions "cpp/container/vector")  
| [vector::vector](vector.html "cpp/container/vector/vector")  
---  
[vector::~vector](~vector.html "cpp/container/vector/~vector")  
[vector::operator=](operator=.html "cpp/container/vector/operator=")  
[vector::assign](assign.html "cpp/container/vector/assign")  
[vector::assign_range](assign_range.html "cpp/container/vector/assign range")(C++23)` `  
[vector::get_allocator](get_allocator.html "cpp/container/vector/get allocator")  
[Element access](../vector.html#Element_access "cpp/container/vector")  
[vector::operator[]](operator_at.html "cpp/container/vector/operator at")  
[vector::at](at.html "cpp/container/vector/at")  
[vector::data](data.html "cpp/container/vector/data")  
[vector::front](front.html "cpp/container/vector/front")  
[vector::back](back.html "cpp/container/vector/back")  
[Iterators](../vector.html#Iterators "cpp/container/vector")  
[vector::beginvector::cbegin](begin.html "cpp/container/vector/begin")(C++11)  
[vector::endvector::cend](end.html "cpp/container/vector/end")(C++11)  
[vector::rbeginvector::crbegin](rbegin.html "cpp/container/vector/rbegin")(C++11)  
[vector::rendvector::crend](rend.html "cpp/container/vector/rend")(C++11)  
  
| [Capacity](../vector.html#Capacity "cpp/container/vector")  
---  
[vector::empty](empty.html "cpp/container/vector/empty")  
[vector::size](size.html "cpp/container/vector/size")  
[vector::max_size](max_size.html "cpp/container/vector/max size")  
**vector::reserve**  
[vector::capacity](capacity.html "cpp/container/vector/capacity")  
[vector::shrink_to_fit](shrink_to_fit.html "cpp/container/vector/shrink to fit")(DR*)  
[Modifiers](../vector.html#Modifiers "cpp/container/vector")  
[vector::clear](clear.html "cpp/container/vector/clear")  
[vector::erase](erase.html "cpp/container/vector/erase")  
[vector::insert](insert.html "cpp/container/vector/insert")  
[vector::insert_range](insert_range.html "cpp/container/vector/insert range")(C++23)  
[vector::append_range](append_range.html "cpp/container/vector/append range")(C++23)  
[vector::emplace](emplace.html "cpp/container/vector/emplace")(C++11)  
[vector::emplace_back](emplace_back.html "cpp/container/vector/emplace back")(C++11)  
[vector::push_back](push_back.html "cpp/container/vector/push back")  
[vector::pop_back](pop_back.html "cpp/container/vector/pop back")  
[vector::resize](resize.html "cpp/container/vector/resize")  
[vector::swap](swap.html "cpp/container/vector/swap")  
  
  
  
  
  
[Non-member functions](../vector.html#Non-member_functions "cpp/container/vector")  
| [operator==operator<=>](operator_cmp.html "cpp/container/vector/operator cmp")(C++20)  
---  
[swap(std::vector)](std_swap.html "cpp/container/vector/swap2")  
[erase(std::vector)erase_if(std::vector)](erase2.html "cpp/container/vector/erase2")(C++20)(C++20)  
  
| [operator!=operator<operator>operator<=operator>=](operator_cmp.html "cpp/container/vector/operator cmp")(until C++20)(until C++20)(until C++20)(until C++20)(until C++20)  
---  
  
[Deduction guides](deduction_guides.html "cpp/container/vector/deduction guides")(C++17)  
  
[[edit]](https://en.cppreference.com/mwiki/index.php?title=Template:cpp/container/vector/navbar_content&action=edit)

void reserve( size_type new_cap ); |  |  (constexpr since C++20)  
---|---|---  
| |   
  
Increase the capacity of the vector (the total number of elements that the vector can hold without requiring reallocation) to a value that's greater or equal to new_cap. If new_cap is greater than the current [capacity()](capacity.html "cpp/container/vector/capacity"), new storage is allocated, otherwise the function does nothing. 

`reserve()` does not change the size of the vector. 

If new_cap is greater than [capacity()](capacity.html "cpp/container/vector/capacity"), all iterators (including the [`end()`](end.html "cpp/container/vector/end") iterator) and all references to the elements are invalidated. Otherwise, no iterators or references are invalidated. 

After a call to `reserve()`, insertions will not trigger reallocation unless the insertion would make the size of the vector greater than the value of [capacity()](capacity.html "cpp/container/vector/capacity"). 

## Contents

  * [1 Parameters](reserve.html#Parameters)
  * [2 Return value](reserve.html#Return_value)
  * [3 Exceptions](reserve.html#Exceptions)
  * [4 Complexity](reserve.html#Complexity)
  * [5 Notes](reserve.html#Notes)
  * [6 Example](reserve.html#Example)
  * [7 Defect reports](reserve.html#Defect_reports)
  * [8 See also](reserve.html#See_also)

  
---  
  
### [[edit](https://en.cppreference.com/mwiki/index.php?title=cpp/container/vector/reserve&action=edit&section=1 "Edit section: Parameters")] Parameters

new_cap  |  \-  |  new capacity of the vector, in number of elements   
---|---|---  
Type requirements   
-`T` must meet the requirements of [MoveInsertable](../../named_req/MoveInsertable.html "cpp/named req/MoveInsertable") into *this. (since C++11)  
  
### [[edit](https://en.cppreference.com/mwiki/index.php?title=cpp/container/vector/reserve&action=edit&section=2 "Edit section: Return value")] Return value

(none) 

### [[edit](https://en.cppreference.com/mwiki/index.php?title=cpp/container/vector/reserve&action=edit&section=3 "Edit section: Exceptions")] Exceptions

  * [std::length_error](../../error/length_error.html "cpp/error/length error") if new_cap > max_size(). 
  * Any exception thrown by `Allocator::allocate()` (typically [std::bad_alloc](../../memory/new/bad_alloc.html "cpp/memory/new/bad alloc")). 



If an exception is thrown, this function has no effect ([strong exception guarantee](../../language/exceptions.html#Exception_safety "cpp/language/exceptions")). 

If `T`'s move constructor is not noexcept and T is not [CopyInsertable](../../named_req/CopyInsertable.html "cpp/named req/CopyInsertable") into *this, vector will use the throwing move constructor. If it throws, the guarantee is waived and the effects are unspecified.  | (since C++11)  
---|---  
  
### [[edit](https://en.cppreference.com/mwiki/index.php?title=cpp/container/vector/reserve&action=edit&section=4 "Edit section: Complexity")] Complexity

At most linear in the [size()](size.html "cpp/container/vector/size") of the container. 

### [[edit](https://en.cppreference.com/mwiki/index.php?title=cpp/container/vector/reserve&action=edit&section=5 "Edit section: Notes")] Notes

Correctly using `reserve()` can prevent unnecessary reallocations, but inappropriate uses of `reserve()` (for instance, calling it before every [push_back()](push_back.html "cpp/container/vector/push back") call) may actually increase the number of reallocations (by causing the capacity to grow linearly rather than exponentially) and result in increased computational complexity and decreased performance. For example, a function that receives an arbitrary vector by reference and appends elements to it should usually _not_ call `reserve()` on the vector, since it does not know of the vector's usage characteristics. 

When inserting a range, the range version of [insert()](insert.html "cpp/container/vector/insert") is generally preferable as it preserves the correct capacity growth behavior, unlike `reserve()` followed by a series of [push_back()](push_back.html "cpp/container/vector/push back")s. 

`reserve()` cannot be used to reduce the capacity of the container; to that end [shrink_to_fit()](shrink_to_fit.html "cpp/container/vector/shrink to fit") is provided. 

### [[edit](https://en.cppreference.com/mwiki/index.php?title=cpp/container/vector/reserve&action=edit&section=6 "Edit section: Example")] Example

Run this code
    
    
    #include <cstddef>
    #include <iostream>
    #include <new>
    #include <vector>
     
    // minimal C++11 allocator with debug output
    template<class Tp>
    struct NAlloc
    {
        typedef Tp value_type;
     
        NAlloc() = default;
        template<class T>
        NAlloc(const NAlloc<T>&) {}
     
        Tp* allocate([std::size_t](../../types/size_t.html) n)
        {
            n *= sizeof(Tp);
            Tp* p = static_cast<Tp*>(::[operator new](../../memory/new/operator_new.html)(n));
            [std::cout](../../io/cout.html) << "allocating " << n << " bytes @ " << p << '\n';
            return p;
        }
     
        void deallocate(Tp* p, [std::size_t](../../types/size_t.html) n)
        {
            [std::cout](../../io/cout.html) << "deallocating " << n * sizeof *p << " bytes @ " << p << "\n\n";
            ::[operator delete](../../memory/new/operator_delete.html)(p);
        }
    };
     
    template<class T, class U>
    bool operator==(const NAlloc<T>&, const NAlloc<U>&) { return true; }
     
    template<class T, class U>
    bool operator!=(const NAlloc<T>&, const NAlloc<U>&) { return false; }
     
    int main()
    {
        constexpr int max_elements = 32;
     
        [std::cout](../../io/cout.html) << "using reserve: \n";
        {
            [std::vector](../vector.html)<int, NAlloc<int>> v1;
            v1.reserve(max_elements); // reserves at least max_elements * sizeof(int) bytes
     
            for (int n = 0; n < max_elements; ++n)
                v1.push_back(n);
        }
     
        [std::cout](../../io/cout.html) << "not using reserve: \n";
        {
            [std::vector](../vector.html)<int, NAlloc<int>> v1;
     
            for (int n = 0; n < max_elements; ++n)
            {
                if (v1.size() == v1.capacity())
                    [std::cout](../../io/cout.html) << "size() == capacity() == " << v1.size() << '\n';
                v1.push_back(n);
            }
        }
    }

Possible output: 
    
    
    using reserve: 
    allocating 128 bytes @ 0xa6f840
    deallocating 128 bytes @ 0xa6f840
     
    not using reserve: 
    size() == capacity() == 0
    allocating 4 bytes @ 0xa6f840
     
    size() == capacity() == 1
    allocating 8 bytes @ 0xa6f860
    deallocating 4 bytes @ 0xa6f840
     
    size() == capacity() == 2
    allocating 16 bytes @ 0xa6f840
    deallocating 8 bytes @ 0xa6f860
     
    size() == capacity() == 4
    allocating 32 bytes @ 0xa6f880
    deallocating 16 bytes @ 0xa6f840
     
    size() == capacity() == 8
    allocating 64 bytes @ 0xa6f8b0
    deallocating 32 bytes @ 0xa6f880
     
    size() == capacity() == 16
    allocating 128 bytes @ 0xa6f900
    deallocating 64 bytes @ 0xa6f8b0
     
    deallocating 128 bytes @ 0xa6f900

### [[edit](https://en.cppreference.com/mwiki/index.php?title=cpp/container/vector/reserve&action=edit&section=7 "Edit section: Defect reports")] Defect reports

The following behavior-changing defect reports were applied retroactively to previously published C++ standards. 

DR  | Applied to  | Behavior as published  | Correct behavior   
---|---|---|---  
[LWG 329](https://cplusplus.github.io/LWG/issue329) | C++98  | reallocation might be triggered if an insertion  
makes the size of the vector greater than the size  
specified in the most recent call to `reserve()` | only triggers if the size  
of the vector becomes  
greater than [capacity()](capacity.html "cpp/container/vector/capacity")  
[LWG 2033](https://cplusplus.github.io/LWG/issue2033) | C++11  | `T` was not required to be [MoveInsertable](../../named_req/MoveInsertable.html "cpp/named req/MoveInsertable") | required   
  
### [[edit](https://en.cppreference.com/mwiki/index.php?title=cpp/container/vector/reserve&action=edit&section=8 "Edit section: See also")] See also

[ capacity](capacity.html "cpp/container/vector/capacity") |  returns the number of elements that can be held in currently allocated storage   
(public member function) [[edit]](https://en.cppreference.com/mwiki/index.php?title=Template:cpp/container/dsc_capacity&action=edit)  
---|---  
[ max_size](max_size.html "cpp/container/vector/max size") |  returns the maximum possible number of elements   
(public member function) [[edit]](https://en.cppreference.com/mwiki/index.php?title=Template:cpp/container/dsc_max_size&action=edit)  
[ resize](resize.html "cpp/container/vector/resize") |  changes the number of elements stored   
(public member function) [[edit]](https://en.cppreference.com/mwiki/index.php?title=Template:cpp/container/dsc_resize&action=edit)  
[ shrink_to_fit](shrink_to_fit.html "cpp/container/vector/shrink to fit")(DR*) |  reduces memory usage by freeing unused memory   
(public member function) [[edit]](https://en.cppreference.com/mwiki/index.php?title=Template:cpp/container/dsc_shrink_to_fit&action=edit)
