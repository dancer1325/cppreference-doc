[C++](../../../cpp.html "cpp")

[Compiler support](../../compiler_support.html "cpp/compiler support")  
---  
[Freestanding and hosted](../../freestanding.html "cpp/freestanding")  
[Language](../../language.html "cpp/language")  
[Standard library](../../standard_library.html "cpp/standard library")  
[Standard library headers](../../headers.html "cpp/header")  
[Named requirements](../../iterator/concepts.html "cpp/named req")  
[Feature test macros](../../experimental/feature_test.html "cpp/feature test") (C++20)  
[Language support library](../../utility.html#Language_support "cpp/utility")  
[Concepts library](../../concepts.html "cpp/concepts") (C++20)  
[Diagnostics library](../../error.html "cpp/error")  
[Memory management library](../../memory.html "cpp/memory")  
[Metaprogramming library](../../meta.html "cpp/meta") (C++11)  
[General utilities library](../../utility.html "cpp/utility")  
[Containers library](../../container.html "cpp/container")  
[Iterators library](../../iterator.html "cpp/iterator")  
[Ranges library](../../ranges.html "cpp/ranges") (C++20)  
[Algorithms library](../../algorithm.html "cpp/algorithm")  
[Strings library](../../string.html "cpp/string")  
[Text processing library](../../text.html "cpp/text")  
[Numerics library](../../numeric.html "cpp/numeric")  
[Date and time library](../../chrono.html "cpp/chrono")  
[Input/output library](../../io.html "cpp/io")  
[Filesystem library](../../filesystem.html "cpp/filesystem") (C++17)  
[Concurrency support library](../../atomic.html "cpp/thread") (C++11)  
[Execution control library](../../experimental/execution.html "cpp/execution") (C++26)  
[Technical specifications](../../experimental.html "cpp/experimental")  
[Symbols index](../../symbol_index.html "cpp/symbol index")  
[External libraries](../../links/libs.html "cpp/links/libs")  
  
[[edit]](https://en.cppreference.com/mwiki/index.php?title=Template:cpp/navbar_content&action=edit)

[Containers library](../../container.html "cpp/container")

[_node-handle_](../node_handle.html "cpp/container/node handle")(C++17)  
---  
[Sequence](../../container.html#Sequence_containers "cpp/container")  
[array](../array.html "cpp/container/array")(C++11)  
[vector](../vector.html "cpp/container/vector")  
[vector<bool>](../vector_bool.html "cpp/container/vector bool")  
[inplace_vector](../inplace_vector.html "cpp/container/inplace vector")(C++26)  
[hive](https://en.cppreference.com/mwiki/index.php?title=cpp/container/hive&action=edit&redlink=1 "cpp/container/hive \(page does not exist\)")(C++26)  
[deque](../deque.html "cpp/container/deque")  
[forward_list](../forward_list.html "cpp/container/forward list")(C++11)  
[list](../list.html "cpp/container/list")  
[Associative](../../container.html#Associative_containers "cpp/container")  
[set](../set.html "cpp/container/set")  
[multiset](../multiset.html "cpp/container/multiset")  
[map](../map.html "cpp/container/map")  
[multimap](../multimap.html "cpp/container/multimap")  
[Unordered associative](../../container.html#Unordered_associative_containers "cpp/container")  
[unordered_set](../unordered_set.html "cpp/container/unordered set")(C++11)  
[unordered_multiset](../unordered_multiset.html "cpp/container/unordered multiset")(C++11)  
[unordered_map](../unordered_map.html "cpp/container/unordered map")(C++11)  
[unordered_multimap](../unordered_multimap.html "cpp/container/unordered multimap")(C++11)  
[Adaptors](../../container.html#Container_adaptors "cpp/container")  
[stack](../stack.html "cpp/container/stack")  
[queue](../queue.html "cpp/container/queue")  
[priority_queue](../priority_queue.html "cpp/container/priority queue")  
[flat_set](../flat_set.html "cpp/container/flat set")(C++23)  
[flat_multiset](../flat_multiset.html "cpp/container/flat multiset")(C++23)  
[flat_map](../flat_map.html "cpp/container/flat map")(C++23)  
[flat_multimap](../flat_multimap.html "cpp/container/flat multimap")(C++23)  
[Views](../../container.html#Views "cpp/container")  
[span](../span.html "cpp/container/span")(C++20)  
[mdspan](../mdspan.html "cpp/container/mdspan")(C++23)  
Tables  
[Iterator invalidation](../../container.html#Iterator_invalidation "cpp/container")  
[Member function table](../../container.html#Member_function_table "cpp/container")  
[Non-member function table](../../container.html#Non-member_function_table "cpp/container")  
  
[[edit]](https://en.cppreference.com/mwiki/index.php?title=Template:cpp/container/navbar_content&action=edit)

`[std::map](../map.html "cpp/container/map")`

[Member functions](../map.html#Member_functions "cpp/container/map")  
---  
|  | [map::map](map.html "cpp/container/map/map")  
---  
[map::~map](~map.html "cpp/container/map/~map")` `  
  
| [map::operator=](operator=.html "cpp/container/map/operator=")  
---  
[map::get_allocator](get_allocator.html "cpp/container/map/get allocator")  
  
|  | [Element access](../map.html#Element_access "cpp/container/map")  
---  
[map::at](at.html "cpp/container/map/at")  
[map::operator[]](operator_at.html "cpp/container/map/operator at")  
[Iterators](../map.html#Iterators "cpp/container/map")  
[map::beginmap::cbegin](begin.html "cpp/container/map/begin")(C++11)  
[map::endmap::cend](end.html "cpp/container/map/end")(C++11)  
[map::rbeginmap::crbegin](rbegin.html "cpp/container/map/rbegin")(C++11)` `  
[map::rendmap::crend](rend.html "cpp/container/map/rend")(C++11)  
[Capacity](../map.html#Capacity "cpp/container/map")  
[map::size](size.html "cpp/container/map/size")  
[map::max_size](max_size.html "cpp/container/map/max size")  
[map::empty](empty.html "cpp/container/map/empty")  
[Observers](../map.html#Observers "cpp/container/map")  
[map::key_comp](key_comp.html "cpp/container/map/key comp")  
[map::value_comp](value_comp.html "cpp/container/map/value comp")  
  
| [Modifiers](../map.html#Modifiers "cpp/container/map")  
---  
[map::clear](clear.html "cpp/container/map/clear")  
**map::insert**  
[map::erase](erase.html "cpp/container/map/erase")  
[map::swap](swap.html "cpp/container/map/swap")  
[map::extract](extract.html "cpp/container/map/extract")(C++17)  
[map::merge](merge.html "cpp/container/map/merge")(C++17)  
[map::insert_range](insert_range.html "cpp/container/map/insert range")(C++23)  
[map::insert_or_assign](insert_or_assign.html "cpp/container/map/insert or assign")(C++17)  
[map::emplace](emplace.html "cpp/container/map/emplace")(C++11)  
[map::emplace_hint](emplace_hint.html "cpp/container/map/emplace hint")(C++11)  
[map::try_emplace](try_emplace.html "cpp/container/map/try emplace")(C++17)  
[Lookup](../map.html#Lookup "cpp/container/map")  
[map::count](count.html "cpp/container/map/count")  
[map::find](find.html "cpp/container/map/find")  
[map::contains](contains.html "cpp/container/map/contains")(C++20)  
[map::equal_range](equal_range.html "cpp/container/map/equal range")  
[map::lower_bound](lower_bound.html "cpp/container/map/lower bound")  
[map::upper_bound](upper_bound.html "cpp/container/map/upper bound")  
  
[Non-member functions](../map.html#Non-member_functions "cpp/container/map")  
|  | [operator==operator<=>](operator_cmp.html "cpp/container/map/operator cmp")(C++20)  
---  
[std::swap(std::map)](swap2.html "cpp/container/map/swap2")  
[erase_if(std::map)](erase_if.html "cpp/container/map/erase if")(C++20)` `  
  
  
  
| [operator!=operator<operator>operator<=operator>=](operator_cmp.html "cpp/container/map/operator cmp")(until C++20)(until C++20)(until C++20)(until C++20)(until C++20)  
---  
  
[Deduction guides](deduction_guides.html "cpp/container/map/deduction guides") (C++17)  
  
[[edit]](https://en.cppreference.com/mwiki/index.php?title=Template:cpp/container/map/navbar_content&action=edit)

[std::pair](../../utility/pair.html)<iterator, bool> insert( const value_type& value ); |  (1) |   
---|---|---  
template< class P >  
[std::pair](../../utility/pair.html)<iterator, bool> insert( P&& value ); |  (2) | (since C++11)  
[std::pair](../../utility/pair.html)<iterator, bool> insert( value_type&& value ); |  (3)  |  (since C++17)  
| (4) |   
iterator insert( iterator pos, const value_type& value ); |  | (until C++11)  
iterator insert( const_iterator pos, const value_type& value ); |  |  (since C++11)  
template< class P >  
iterator insert( const_iterator pos, P&& value ); |  (5) | (since C++11)  
iterator insert( const_iterator pos, value_type&& value ); |  (6)  |  (since C++17)  
template< class InputIt >  
void insert( InputIt first, InputIt last ); |  (7) |   
void insert( [std::initializer_list](../../utility/initializer_list.html)<value_type> ilist ); |  (8)  |  (since C++11)  
insert_return_type insert( node_type&& nh ); |  (9)  |  (since C++17)  
iterator insert( const_iterator pos, node_type&& nh ); |  (10) | (since C++17)  
| |   
  
Inserts element(s) into the container, if the container doesn't already contain an element with an equivalent key. 

1-3) Inserts value.

Overload (2) is equivalent to emplace([std::forward](../../utility/forward.html)<P>(value)) and only participates in overload resolution if [std::is_constructible](../../types/is_constructible.html)<value_type, P&&>::value == true.

4-6) Inserts value in the position as close as possible to the position just prior to pos.

Overload (5) is equivalent to emplace_hint(pos, [std::forward](../../utility/forward.html)<P>(value)) and only participates in overload resolution if [std::is_constructible](../../types/is_constructible.html)<value_type, P&&>::value == true.

7) Inserts elements from range `[`first`, `last`)`. If multiple elements in the range have keys that compare equivalent, it is unspecified which element is inserted (pending [LWG2844](https://cplusplus.github.io/LWG/issue2844)).

8) Inserts elements from initializer list ilist. If multiple elements in the range have keys that compare equivalent, it is unspecified which element is inserted (pending [LWG2844](https://cplusplus.github.io/LWG/issue2844)).

9) If nh is an empty [node handle](../node_handle.html "cpp/container/node handle"), does nothing. Otherwise, inserts the element owned by nh into the container , if the container doesn't already contain an element with a key equivalent to nh.key(). The behavior is undefined if nh is not empty and get_allocator() != nh.get_allocator().

10) If nh is an empty [node handle](../node_handle.html "cpp/container/node handle"), does nothing and returns the end iterator. Otherwise, inserts the element owned by nh into the container, if the container doesn't already contain an element with a key equivalent to nh.key(), and returns the iterator pointing to the element with key equivalent to nh.key()(regardless of whether the insert succeeded or failed). If the insertion succeeds, nh is moved from, otherwise it retains ownership of the element. The element is inserted as close as possible to the position just prior to pos. The behavior is undefined if nh is not empty and get_allocator() != nh.get_allocator().

No iterators or references are invalidated. If the insertion is successful, pointers and references to the element obtained while it is held in the node handle are invalidated, and pointers and references obtained to that element before it was extracted become valid.(since C++17)

## Contents

  * [1 Parameters](insert.html#Parameters)
  * [2 Return value](insert.html#Return_value)
  * [3 Exceptions](insert.html#Exceptions)
  * [4 Complexity](insert.html#Complexity)
  * [5 Notes](insert.html#Notes)
  * [6 Example](insert.html#Example)
  * [7 Defect reports](insert.html#Defect_reports)
  * [8 See also](insert.html#See_also)

  
---  
  
### [[edit](https://en.cppreference.com/mwiki/index.php?title=cpp/container/map/insert&action=edit&section=1 "Edit section: Parameters")] Parameters

pos  |  \-  |  iterator to the position before which the new element will be inserted   
---|---|---  
value  |  \-  |  element value to insert   
first, last  |  \-  |  the pair of iterators defining the [range](../../iterator.html#Ranges "cpp/iterator") of elements to insert   
ilist  |  \-  |  initializer list to insert the values from   
nh  |  \-  |  a compatible [node handle](../node_handle.html "cpp/container/node handle")  
Type requirements   
-`InputIt` must meet the requirements of [LegacyInputIterator](../../named_req/InputIterator.html "cpp/named req/InputIterator").   
  
### [[edit](https://en.cppreference.com/mwiki/index.php?title=cpp/container/map/insert&action=edit&section=2 "Edit section: Return value")] Return value

1-3) A pair consisting of an iterator to the inserted element (or to the element that prevented the insertion) and a bool value set to true if and only if the insertion took place.

4-6) An iterator to the inserted element, or to the element that prevented the insertion.

7,8) (none)

9) An object of [`insert_return_type`](../map.html#Member_types "cpp/container/map") with the members initialized as follows: 

  * If nh is empty, `inserted` is false, `position` is end(), and `node` is empty. 
  * Otherwise if the insertion took place, `inserted` is true, `position` points to the inserted element, and `node` is empty. 
  * If the insertion failed, `inserted` is false, `node` has the previous value of nh, and `position` points to an element with a key equivalent to nh.key().



10) End iterator if nh was empty, iterator pointing to the inserted element if insertion took place, and iterator pointing to an element with a key equivalent to nh.key() if it failed.

### [[edit](https://en.cppreference.com/mwiki/index.php?title=cpp/container/map/insert&action=edit&section=3 "Edit section: Exceptions")] Exceptions

1-6) If an exception is thrown by any operation, the insertion has no effect.

| This section is incomplete  
Reason: cases 7-10   
---|---  
  
### [[edit](https://en.cppreference.com/mwiki/index.php?title=cpp/container/map/insert&action=edit&section=4 "Edit section: Complexity")] Complexity

1-3) Logarithmic in the size of the container, `O(log(size()))`.

4-6) Amortized constant if the insertion happens in the position just _after_(until C++11)_before_(since C++11) pos, logarithmic in the size of the container otherwise.

7,8) `O(N·log(size() + N))`, where `N` is the number of elements to insert.

9) Logarithmic in the size of the container, `O(log(size()))`.

10) Amortized constant if the insertion happens in the position just _before_ pos, logarithmic in the size of the container otherwise.

### [[edit](https://en.cppreference.com/mwiki/index.php?title=cpp/container/map/insert&action=edit&section=5 "Edit section: Notes")] Notes

The hinted insert (([4-6](insert.html#Version_4)) and ([10](insert.html#Version_10))) does not return a boolean in order to be signature-compatible with positional insert on sequential containers, such as [std::vector::insert](../vector/insert.html "cpp/container/vector/insert"). This makes it possible to create generic inserters such as [std::inserter](../../iterator/inserter.html "cpp/iterator/inserter"). One way to check success of a hinted insert is to compare [`size()`](size.html "cpp/container/map/size") before and after. 

### [[edit](https://en.cppreference.com/mwiki/index.php?title=cpp/container/map/insert&action=edit&section=6 "Edit section: Example")] Example

Run this code
    
    
    #include <iomanip>
    #include <iostream>
    #include <map>
    #include <string>
    using namespace std::literals;
     
    template<typename It>
    void print_insertion_status(It it, bool success)
    {
        [std::cout](../../io/cout.html) << "Insertion of " << it->first
                  << (success ? " succeeded\n" : " failed\n");
    }
     
    int main()
    {
        [std::map](../map.html)<[std::string](../../string/basic_string.html), float> heights;
     
        // Overload 3: insert from rvalue reference
        const auto [it_hinata, success] = heights.insert({"Hinata"s, 162.8});
        print_insertion_status(it_hinata, success);
     
        {
            // Overload 1: insert from lvalue reference
            const auto [it, success2] = heights.insert(*it_hinata);
            print_insertion_status(it, success2);
        }
        {
            // Overload 2: insert via forwarding to emplace
            const auto [it, success] = heights.insert([std::pair](../../utility/pair.html){"Kageyama", 180.6});
            print_insertion_status(it, success);
        }
        {
            // Overload 6: insert from rvalue reference with positional hint
            const [std::size_t](../../types/size_t.html) n = [std::size](../../iterator/size.html)(heights);
            const auto it = heights.insert(it_hinata, {"Azumane"s, 184.7});
            print_insertion_status(it, [std::size](../../iterator/size.html)(heights) != n);
        }
        {
            // Overload 4: insert from lvalue reference with positional hint
            const [std::size_t](../../types/size_t.html) n = [std::size](../../iterator/size.html)(heights);
            const auto it = heights.insert(it_hinata, *it_hinata);
            print_insertion_status(it, [std::size](../../iterator/size.html)(heights) != n);
        }
        {
            // Overload 5: insert via forwarding to emplace with positional hint
            const [std::size_t](../../types/size_t.html) n = [std::size](../../iterator/size.html)(heights);
            const auto it = heights.insert(it_hinata, [std::pair](../../utility/pair.html){"Tsukishima", 188.3});
            print_insertion_status(it, [std::size](../../iterator/size.html)(heights) != n);
        }
     
        auto node_hinata = heights.extract(it_hinata);
        [std::map](../map.html)<[std::string](../../string/basic_string.html), float> heights2;
     
        // Overload 7: insert from iterator range
        heights2.insert([std::begin](../../iterator/begin.html)(heights), [std::end](../../iterator/end.html)(heights));
     
        // Overload 8: insert from initializer_list
        heights2.insert({{"Kozume"s, 169.2}, {"Kuroo", 187.7}});
     
        // Overload 9: insert node
        const auto status = heights2.insert(std::move(node_hinata));
        print_insertion_status(status.position, status.inserted);
     
        node_hinata = heights2.extract(status.position);
        {
            // Overload 10: insert node with positional hint
            const [std::size_t](../../types/size_t.html) n = [std::size](../../iterator/size.html)(heights2);
            const auto it = heights2.insert([std::begin](../../iterator/begin.html)(heights2), std::move(node_hinata));
            print_insertion_status(it, [std::size](../../iterator/size.html)(heights2) != n);
        }
     
        // Print resulting map
        [std::cout](../../io/cout.html) << [std::left](../../io/manip/left.html) << '\n';
        for (const auto& [name, height] : heights2)
            [std::cout](../../io/cout.html) << [std::setw](../../io/manip/setw.html)(10) << name << " | " << height << "cm\n";
    }

Output: 
    
    
    Insertion of Hinata succeeded
    Insertion of Hinata failed
    Insertion of Kageyama succeeded
    Insertion of Azumane succeeded
    Insertion of Hinata failed
    Insertion of Tsukishima succeeded
    Insertion of Hinata succeeded
    Insertion of Hinata succeeded
     
    Azumane    | 184.7cm
    Hinata     | 162.8cm
    Kageyama   | 180.6cm
    Kozume     | 169.2cm
    Kuroo      | 187.7cm
    Tsukishima | 188.3cm

### [[edit](https://en.cppreference.com/mwiki/index.php?title=cpp/container/map/insert&action=edit&section=7 "Edit section: Defect reports")] Defect reports

The following behavior-changing defect reports were applied retroactively to previously published C++ standards. 

DR  | Applied to  | Behavior as published  | Correct behavior   
---|---|---|---  
[LWG 233](https://cplusplus.github.io/LWG/issue233) | C++98  | pos was just a hint, it could be totally ignored  | the insertion is required to  
be as close as possible to the  
position just prior to pos  
[LWG 264](https://cplusplus.github.io/LWG/issue264) | C++98  | the complexity of overload ([7](insert.html#Version_7)) was required to be linear if  
the range `[`first`, `last`)` is sorted according to `Compare` | removed the linear requirement  
in this special case   
[LWG 316](https://cplusplus.github.io/LWG/issue316) | C++98  | in the return value of overload ([1](insert.html#Version_1)), it was not specified  
which bool value indicates a successful insertion  | success is  
indicated by true  
[LWG 2005](https://cplusplus.github.io/LWG/issue2005) | C++11  | overloads ([2](insert.html#Version_2)) and ([5](insert.html#Version_5)) were poorly described  | improved the description   
  
### [[edit](https://en.cppreference.com/mwiki/index.php?title=cpp/container/map/insert&action=edit&section=8 "Edit section: See also")] See also

[ emplace](emplace.html "cpp/container/map/emplace")(C++11) |  constructs element in-place   
(public member function) [[edit]](https://en.cppreference.com/mwiki/index.php?title=Template:cpp/container/dsc_emplace&action=edit)  
---|---  
[ emplace_hint](emplace_hint.html "cpp/container/map/emplace hint")(C++11) |  constructs elements in-place using a hint   
(public member function) [[edit]](https://en.cppreference.com/mwiki/index.php?title=Template:cpp/container/dsc_emplace_hint&action=edit)  
[ insert_or_assign](insert_or_assign.html "cpp/container/map/insert or assign")(C++17) |  inserts an element or assigns to the current element if the key already exists   
(public member function) [[edit]](https://en.cppreference.com/mwiki/index.php?title=Template:cpp/container/dsc_insert_or_assign&action=edit)  
[ inserter](../../iterator/inserter.html "cpp/iterator/inserter") |  creates a [std::insert_iterator](../../iterator/insert_iterator.html "cpp/iterator/insert iterator") of type inferred from the argument   
(function template) [[edit]](https://en.cppreference.com/mwiki/index.php?title=Template:cpp/iterator/dsc_inserter&action=edit)
