[C++](../../cpp.html "cpp")

[Compiler support](../compiler_support.html "cpp/compiler support")  
---  
[Freestanding and hosted](../freestanding.html "cpp/freestanding")  
[Language](../language.html "cpp/language")  
[Standard library](../standard_library.html "cpp/standard library")  
[Standard library headers](../headers.html "cpp/header")  
[Named requirements](../iterator/concepts.html "cpp/named req")  
[Feature test macros](../experimental/feature_test.html "cpp/feature test") (C++20)  
[Language support library](../utility.html#Language_support "cpp/utility")  
[Concepts library](../concepts.html "cpp/concepts") (C++20)  
[Diagnostics library](../error.html "cpp/error")  
[Memory management library](../memory.html "cpp/memory")  
[Metaprogramming library](../meta.html "cpp/meta") (C++11)  
[General utilities library](../utility.html "cpp/utility")  
[Containers library](../container.html "cpp/container")  
[Iterators library](../iterator.html "cpp/iterator")  
[Ranges library](../ranges.html "cpp/ranges") (C++20)  
[Algorithms library](../algorithm.html "cpp/algorithm")  
[Strings library](../string.html "cpp/string")  
[Text processing library](../text.html "cpp/text")  
[Numerics library](../numeric.html "cpp/numeric")  
[Date and time library](../chrono.html "cpp/chrono")  
[Input/output library](../io.html "cpp/io")  
[Filesystem library](../filesystem.html "cpp/filesystem") (C++17)  
[Concurrency support library](../atomic.html "cpp/thread") (C++11)  
[Execution control library](../experimental/execution.html "cpp/execution") (C++26)  
[Technical specifications](../experimental.html "cpp/experimental")  
[Symbols index](../symbol_index.html "cpp/symbol index")  
[External libraries](../links/libs.html "cpp/links/libs")  
  
[[edit]](https://en.cppreference.com/mwiki/index.php?title=Template:cpp/navbar_content&action=edit)

[C++ language](../language.html "cpp/language")

General topics  
---  
| [Preprocessor](../preprocessor.html "cpp/preprocessor")  
---  
[Comments](../comments.html "cpp/comment")  
  
| [Keywords](../keywords.html "cpp/keyword")  
---  
[Escape sequences](../language/escape.html "cpp/language/escape")  
  
[Flow control](../language/statements.html "cpp/language/statements")  
Conditional execution statements  
| [`if`](../language/if.html "cpp/language/if")  
---  
  
| [`switch`](../language/switch.html "cpp/language/switch")  
---  
  
Iteration statements (loops)  
| [`for`](../language/for.html "cpp/language/for")  
---  
[range-`for`](../language/range-for.html "cpp/language/range-for") (C++11)  
  
| [`while`](../language/while.html "cpp/language/while")  
---  
[`do-while`](../language/do.html "cpp/language/do")  
  
Jump statements  
| [`continue`](../language/continue.html "cpp/language/continue") \- [`break`](../language/break.html "cpp/language/break")  
---  
  
| [`goto`](../language/goto.html "cpp/language/goto") \- [`return`](../language/return.html "cpp/language/return")  
---  
  
[Functions](../language/functions.html "cpp/language/functions")  
[Function declaration](../language/function.html "cpp/language/function")  
[Lambda function expression](../language/lambda.html "cpp/language/lambda")  
[`inline` specifier](../language/inline.html "cpp/language/inline")  
[Dynamic exception specifications](../language/except_spec.html "cpp/language/except spec") (until C++17*)  
[`noexcept` specifier](../language/noexcept_spec.html "cpp/language/noexcept spec") (C++11)  
Exceptions  
| [`throw`-expression](../language/throw.html "cpp/language/throw")  
---  
[`try` block](../language/try.html "cpp/language/try")  
  
|   
  
---  
[`catch` handler](../language/catch.html "cpp/language/catch")  
  
Namespaces  
| [Namespace declaration](../language/namespace.html "cpp/language/namespace")` `  
---  
  
| [Namespace aliases](../language/namespace_alias.html "cpp/language/namespace alias")  
---  
  
Types  
| [Fundamental types](../language/types.html "cpp/language/types")  
---  
[Enumeration types](../language/enum.html "cpp/language/enum")  
[Function types](../language/function.html "cpp/language/function")  
  
| [Class/struct types](../language/class.html "cpp/language/class")  
---  
[Union types](../language/union.html "cpp/language/union")  
  
  
  
Specifiers  
| [`const`/`volatile`](../language/cv.html "cpp/language/cv")  
---  
[`decltype`](../language/decltype.html "cpp/language/decltype") (C++11)  
[`auto`](../language/auto.html "cpp/language/auto") (C++11)  
  
| [`constexpr`](../language/constexpr.html "cpp/language/constexpr") (C++11)  
---  
[`consteval`](../language/consteval.html "cpp/language/consteval") (C++20)  
[`constinit`](../language/constinit.html "cpp/language/constinit") (C++20)  
  
[Storage duration specifiers](../language/storage_duration.html "cpp/language/storage duration")  
[Initialization](../language/initialization.html "cpp/language/initialization")  
| [Default-initialization](../language/default_initialization.html "cpp/language/default initialization")  
---  
[Value-initialization](../language/value_initialization.html "cpp/language/value initialization")  
[Zero-initialization](../language/zero_initialization.html "cpp/language/zero initialization")  
[Copy-initialization](../language/copy_initialization.html "cpp/language/copy initialization")  
[Direct-initialization](../language/direct_initialization.html "cpp/language/direct initialization")  
  
| [Aggregate initialization](../language/aggregate_initialization.html "cpp/language/aggregate initialization")  
---  
[List-initialization](../language/list_initialization.html "cpp/language/list initialization") (C++11)` `  
[Constant initialization](../language/constant_initialization.html "cpp/language/constant initialization")  
[Reference initialization](../language/reference_initialization.html "cpp/language/reference initialization")  
  
  
  
[Expressions](../language/expressions.html "cpp/language/expressions")  
---  
| [Value categories](../language/value_category.html "cpp/language/value category")  
---  
[Order of evaluation](../language/eval_order.html "cpp/language/eval order")  
  
| [Operators](../language/operators.html "cpp/language/operators")  
---  
[Operator precedence](../language/operator_precedence.html "cpp/language/operator precedence")  
  
[Alternative representations](../language/operator_alternative.html "cpp/language/operator alternative")  
[Literals](../language/expressions.html#Literals "cpp/language/expressions")  
[Boolean](../language/bool_literal.html "cpp/language/bool literal") \- [Integer](../language/integer_literal.html "cpp/language/integer literal") \- [Floating-point](../language/floating_literal.html "cpp/language/floating literal")  
[Character](../language/character_literal.html "cpp/language/character literal") \- [String](../language/string_literal.html "cpp/language/string literal") \- [`nullptr`](../language/nullptr.html "cpp/language/nullptr") (C++11)  
[User-defined](../language/user_literal.html "cpp/language/user literal") (C++11)  
Utilities  
[Attributes](../language/attributes.html "cpp/language/attributes") (C++11)  
Types  
[`typedef` declaration](../language/typedef.html "cpp/language/typedef")  
[Type alias declaration](../language/type_alias.html "cpp/language/type alias") (C++11)  
Casts  
| [Implicit conversions](../language/implicit_cast.html "cpp/language/implicit conversion")  
---  
[`static_cast`](../language/static_cast.html "cpp/language/static cast")  
[`const_cast`](../language/const_cast.html "cpp/language/const cast")  
  
| [Explicit conversions](../language/explicit_cast.html "cpp/language/explicit cast")  
---  
[`dynamic_cast`](../language/dynamic_cast.html "cpp/language/dynamic cast")  
[`reinterpret_cast`](../language/reinterpret_cast.html "cpp/language/reinterpret cast")  
  
Memory allocation  
| [`new` expression](../language/new.html "cpp/language/new")  
---  
  
| [`delete` expression](../language/delete.html "cpp/language/delete")  
---  
  
[Classes](../language/classes.html "cpp/language/classes")  
| [Class declaration](../language/class.html "cpp/language/class")  
---  
[Constructors](../language/initializer_list.html "cpp/language/constructor")  
[`this` pointer](../language/this.html "cpp/language/this")  
  
| [Access specifiers](../language/access.html "cpp/language/access")  
---  
[`friend` specifier](../language/friend.html "cpp/language/friend")  
  
  
  
Class-specific function properties  
| [Virtual function](../language/virtual.html "cpp/language/virtual")  
---  
[`override` specifier](../language/override.html "cpp/language/override") (C++11)` `  
[`final` specifier](../language/final.html "cpp/language/final") (C++11)  
  
| [`explicit`](../language/explicit.html "cpp/language/explicit") (C++11)  
---  
[`static`](../language/static.html "cpp/language/static")  
  
  
  
Special member functions  
| [Default constructor](../language/default_constructor.html "cpp/language/default constructor")  
---  
[Copy constructor](../language/copy_constructor.html "cpp/language/copy constructor")  
[Move constructor](../language/move_constructor.html "cpp/language/move constructor") (C++11)  
  
| [Copy assignment](../language/as_operator.html "cpp/language/as operator")  
---  
[Move assignment](../language/move_operator.html "cpp/language/move operator") (C++11)  
[Destructor](../language/destructor.html "cpp/language/destructor")  
  
[Templates](../language/templates.html "cpp/language/templates")  
| [Class template](../language/class_template.html "cpp/language/class template")  
---  
[Function template](../language/function_template.html "cpp/language/function template")  
  
| [Template specialization](../language/template_specialization.html "cpp/language/template specialization")  
---  
[Parameter packs](../language/parameter_pack.html "cpp/language/pack") (C++11)  
  
Miscellaneous  
| [Inline assembly](../language/asm.html "cpp/language/asm")  
---  
  
| [History of C++](../language/history.html "cpp/language/history")  
---  
  
[[edit]](https://en.cppreference.com/mwiki/index.php?title=Template:cpp/language/navbar_content&action=edit)

[Preprocessor](../preprocessor.html "cpp/preprocessor")

**#if #ifdef#ifndef#else#elif#elifdef#elifndef#endif**(C++23)(C++23)  
---  
[#define#undef#,## operators](replace.html "cpp/preprocessor/replace")  
[#include__has_include](include.html "cpp/preprocessor/include")(C++17)  
[#error#warning](warning.html "cpp/preprocessor/error")(C++23)  
[#pragma_Pragma](impl.html "cpp/preprocessor/impl")(C++11)  
[#line](line.html "cpp/preprocessor/line")  
[#embed](embed.html "cpp/preprocessor/embed")(C++26)  
  
[[edit]](https://en.cppreference.com/mwiki/index.php?title=Template:cpp/preprocessor/navbar_content&action=edit)

The preprocessor supports conditional compilation of parts of source file. This behavior is controlled by `#if`, `#else`, `#elif`, `#ifdef`, `#ifndef`, `#elifdef`, `#elifndef`(since C++23), and `#endif` directives. 

## Contents

  * [1 Syntax](conditional.html#Syntax)
  * [2 Explanation](conditional.html#Explanation)
  * [3 Condition evaluation](conditional.html#Condition_evaluation)
    * [3.1 #if, #elif](conditional.html#.23if.2C_.23elif)
    * [3.2 Combined directives](conditional.html#Combined_directives)
  * [4 Notes](conditional.html#Notes)
  * [5 Example](conditional.html#Example)
  * [6 Defect reports](conditional.html#Defect_reports)
  * [7 See also](conditional.html#See_also)

  
---  
  
### [[edit](https://en.cppreference.com/mwiki/index.php?title=cpp/preprocessor/conditional&action=edit&section=1 "Edit section: Syntax")] Syntax  
  
---  
`**#if**` expression |  |   
`**#ifdef**` identifier |  |   
`**#ifndef**` identifier |  |   
`**#elif**` expression |  |   
`**#elifdef**` identifier |  |  (since C++23)  
`**#elifndef**` identifier |  |  (since C++23)  
`**#else**` |  |   
`**#endif**` |  |   
  
### [[edit](https://en.cppreference.com/mwiki/index.php?title=cpp/preprocessor/conditional&action=edit&section=2 "Edit section: Explanation")] Explanation

The conditional preprocessing block starts with `#if`, `#ifdef` or `#ifndef` directive, then optionally includes any number of `#elif`, `#elifdef`, or `#elifndef`(since C++23) directives, then optionally includes at most one `#else` directive and is terminated with `#endif` directive. Any inner conditional preprocessing blocks are processed separately. 

Each of `#if`, `#ifdef`, `#ifndef`, `#elif`, `#elifdef`, `#elifndef`(since C++23), and `#else` directives control the code block until the first `#elif`, `#elifdef`, `#elifndef`(since C++23), `#else`, `#endif` directive not belonging to any inner conditional preprocessing blocks. 

`#if`, `#ifdef` and `#ifndef` directives test the specified condition (see below) and if it evaluates to true, compiles the controlled code block. In that case subsequent `#else`, `#elifdef`, `#elifndef`,(since C++23) and `#elif` directives are ignored. Otherwise, if the specified condition evaluates false, the controlled code block is skipped and the subsequent `#else`, `#elifdef`, `#elifndef`,(since C++23) or `#elif` directive (if any) is processed. If the subsequent directive is `#else`, the code block controlled by the `#else` directive is unconditionally compiled. Otherwise, the `#elif`, `#elifdef`, or `#elifndef`(since C++23) directive acts as if it was `#if` directive: checks for condition, compiles or skips the controlled code block based on the result, and in the latter case processes subsequent `#elif`, `#elifdef`, `#elifndef`,(since C++23) and `#else` directives. The conditional preprocessing block is terminated by `#endif` directive. 

### [[edit](https://en.cppreference.com/mwiki/index.php?title=cpp/preprocessor/conditional&action=edit&section=3 "Edit section: Condition evaluation")] Condition evaluation

#### [[edit](https://en.cppreference.com/mwiki/index.php?title=cpp/preprocessor/conditional&action=edit&section=4 "Edit section: #if, #elif")] #if, #elif

expression may contain unary operators in form `**defined**` identifier or `**defined (**` identifier`**)**`. The result is 1 if the identifier was [defined as a macro name](replace.html "cpp/preprocessor/replace"), otherwise the result is ​0​. 

expression may also contain the following expressions: 

  * [`__has_include`](include.html "cpp/preprocessor/include") expressions, which detects whether a header or source file exists. 

| 

  * [`__has_cpp_attribute`](../experimental/feature_test.html#Attributes "cpp/feature test") expressions, which detects whether a given attribute token is supported and its supported version. 

| (since C++20)  
---|---  
  
  * [`__has_embed`](embed.html "cpp/preprocessor/embed") expressions, which detects whether a resource is available to be embedded. 

| (since C++26)  
  
The identifiers mentioned above are treated as if they were the names of defined macros in this context. 

(since C++17)  
  
After all macro expansion and evaluation `defined` and the expressions described above, any identifier which is not a [boolean literal](../language/bool_literal.html "cpp/language/bool literal") is replaced with the number ​0​ (this includes identifiers that are lexically keywords, but not alternative tokens like and). 

Then the expression is evaluated as an [integral constant expression](../language/constant_expression.html#Integral_constant_expression "cpp/language/constant expression"). 

If the expression evaluates to nonzero value, the controlled code block is included and skipped otherwise. 

Note: Until the resolution of [CWG issue 1955](https://cplusplus.github.io/CWG/issues/1955.html), `#if _cond1_` ... `#elif _cond2_` is different from `#if _cond1_` ... `#else` followed by `#if _cond2_` because if `_cond1_` is true, the second `#if` is skipped and `_cond2_` does not need to be well-formed, while `#elif`'s `_cond2_` must be a valid expression. As of CWG 1955, `#elif` that leads the skipped code block is also skipped. 

#### [[edit](https://en.cppreference.com/mwiki/index.php?title=cpp/preprocessor/conditional&action=edit&section=5 "Edit section: Combined directives")] Combined directives

Checks if the identifier was [defined as a macro name](replace.html "cpp/preprocessor/replace"). 

`#ifdef` identifier is essentially equivalent to `#if defined` identifier. 

`#ifndef` identifier is essentially equivalent to `#if !defined` identifier. 

`#elifdef` identifier is essentially equivalent to `#elif defined` identifier. `#elifndef` identifier is essentially equivalent to `#elif !defined` identifier.  | (since C++23)  
---|---  
  
### [[edit](https://en.cppreference.com/mwiki/index.php?title=cpp/preprocessor/conditional&action=edit&section=6 "Edit section: Notes")] Notes

While `#elifdef` and `#elifndef` directives target C++23, implementations are encouraged to backport them to the older language modes as conforming extensions. 

### [[edit](https://en.cppreference.com/mwiki/index.php?title=cpp/preprocessor/conditional&action=edit&section=7 "Edit section: Example")] Example

Run this code
    
    
    #define ABCD 2
    #include <iostream>
     
    int main()
    {
     
    #ifdef ABCD
        [std::cout](../io/cout.html) << "1: yes\n";
    #else
        [std::cout](../io/cout.html) << "1: no\n";
    #endif
     
    #ifndef ABCD
        [std::cout](../io/cout.html) << "2: no1\n";
    #elif ABCD == 2
        [std::cout](../io/cout.html) << "2: yes\n";
    #else
        [std::cout](../io/cout.html) << "2: no2\n";
    #endif
     
    #if !defined(DCBA) && (ABCD < 2*4-3)
        [std::cout](../io/cout.html) << "3: yes\n";
    #endif
     
     
    // Note that if a compiler does not support C++23's #elifdef/#elifndef
    // directives then the "unexpected" block (see below) will be selected.
    #ifdef CPU
        [std::cout](../io/cout.html) << "4: no1\n";
    #elifdef GPU
        [std::cout](../io/cout.html) << "4: no2\n";
    #elifndef RAM
        [std::cout](../io/cout.html) << "4: yes\n"; // expected block
    #else
        [std::cout](../io/cout.html) << "4: no!\n"; // unexpectedly selects this block by skipping
                                 // unknown directives and "jumping" directly
                                 // from "#ifdef CPU" to this "#else" block
    #endif
     
    // To fix the problem above we may conditionally define the
    // macro ELIFDEF_SUPPORTED only if the C++23 directives
    // #elifdef/#elifndef are supported.
    #if 0
    #elifndef UNDEFINED_MACRO
    #define ELIFDEF_SUPPORTED
    #else
    #endif
     
    #ifdef ELIFDEF_SUPPORTED
        #ifdef CPU
            [std::cout](../io/cout.html) << "4: no1\n";
        #elifdef GPU
            [std::cout](../io/cout.html) << "4: no2\n";
        #elifndef RAM
            [std::cout](../io/cout.html) << "4: yes\n"; // expected block
        #else
            [std::cout](../io/cout.html) << "4: no3\n";
        #endif
    #else // when #elifdef unsupported use old verbose “#elif defined”
        #ifdef CPU
            [std::cout](../io/cout.html) << "4: no1\n";
        #elif defined GPU
            [std::cout](../io/cout.html) << "4: no2\n";
        #elif !defined RAM
            [std::cout](../io/cout.html) << "4: yes\n"; // expected block
        #else
            [std::cout](../io/cout.html) << "4: no3\n";
        #endif
    #endif
    }

Possible output: 
    
    
    1: yes
    2: yes
    3: yes
    4: no!
    4: yes

### [[edit](https://en.cppreference.com/mwiki/index.php?title=cpp/preprocessor/conditional&action=edit&section=8 "Edit section: Defect reports")] Defect reports

The following behavior-changing defect reports were applied retroactively to previously published C++ standards. 

DR  | Applied to  | Behavior as published  | Correct behavior   
---|---|---|---  
[CWG 1955](https://cplusplus.github.io/CWG/issues/1955.html) | C++98  | failed #elif's expression was required to be valid  | failed #elif is skipped   
  
### [[edit](https://en.cppreference.com/mwiki/index.php?title=cpp/preprocessor/conditional&action=edit&section=9 "Edit section: See also")] See also

[C documentation](../../c/preprocessor/conditional.html "c/preprocessor/conditional") for Conditional inclusion  
---
